(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1573],{77115:function(e,t,a){Promise.resolve().then(a.bind(a,47358)),Promise.resolve().then(a.bind(a,28169)),Promise.resolve().then(a.bind(a,97370)),Promise.resolve().then(a.bind(a,66869)),Promise.resolve().then(a.bind(a,87188))},74860:function(e,t,a){"use strict";a.d(t,{p:function(){return s}});let s="https://mindpal.space"},47358:function(e,t,a){"use strict";a.d(t,{ChatbotContextProvider:function(){return u},X:function(){return c}});var s=a(57437),i=a(2265),n=a(66869);let l={zinc:"#18181B"};var r=a(41121),o=a(76444);let d=(0,i.createContext)(void 0),c=()=>{let e=(0,i.useContext)(d);if(!e)throw Error("useChatbotContext must be used within a ChatbotContextProvider");return e},u=e=>{let t=(0,i.useRef)(null),[a,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("session");if(e){c(e);let a=(0,o.hO)(e);a&&(t.current=a)}},[e.chatbotData.id]);let u=(0,i.useCallback)(()=>{c(null),t.current=null;{let e=new URL(window.location.href);e.searchParams.delete("session"),window.history.replaceState({},"",e.toString())}},[]),{data:m,isLoading:p}=r.h.usageControl.getAiCreditDataByChatbotSlug.useQuery({chatbotSlug:e.chatbotData.slug}),f={baseColor:e.chatbotData.accentColor||l.zinc},x=(0,i.useMemo)(()=>{var s,i;return{chatbotData:e.chatbotData,chatbotConvoId:t,sessionToken:a,setSessionToken:c,clearSession:u,aiCreditLimit:null!==(s=null==m?void 0:m.limit)&&void 0!==s?s:null,aiCreditCount:null!==(i=null==m?void 0:m.count)&&void 0!==i?i:0,accentColors:f}},[e.chatbotData,t,a,c,u,m,f]);if(p){let i={chatbotData:e.chatbotData,chatbotConvoId:t,sessionToken:a,setSessionToken:c,clearSession:u,aiCreditLimit:null,aiCreditCount:0,accentColors:f};return(0,s.jsx)(d.Provider,{value:i,children:e.children})}return m&&void 0!==m.count&&null!==m.count?(0,s.jsx)(d.Provider,{value:x,children:e.children}):(0,s.jsx)(n.default,{heading:"Authorization error",desc:"We couldn't validate the usage of this chatbot. Please contact support."})}},28169:function(e,t,a){"use strict";a.d(t,{A:function(){return r},DataStreamProvider:function(){return l}});var s=a(57437),i=a(2265);let n=(0,i.createContext)(null);function l(e){let{children:t,originKey:a}=e,[l,r]=(0,i.useState)([]),o=(0,i.useMemo)(()=>({dataStream:l,setDataStream:r,originKey:a}),[l,a]);return(0,s.jsx)(n.Provider,{value:o,children:t})}function r(){let e=(0,i.useContext)(n);if(!e)throw Error("useDataStream must be used within a DataStreamProvider");return e}},97370:function(e,t,a){"use strict";a.d(t,{default:function(){return av}});var s,i,n=a(57437),l=a(41658),r=a(54031),o=a(80834),d=a(45936),c=a(16255),u=a(43475),m=a(21897),p=a(26299),f=a(54557),x=a(8652),h=a(40111),g=a(60628),v=a(47358),y=a(34724),w=a(37802),b=a(99393),N=a(36807),j=a(94776),I=a(2265),C=a(57970);function A(){let[e,t]=(0,I.useState)(!1),a=(0,I.useMemo)(()=>"undefined"!=typeof document&&(!!navigator.clipboard&&!!window.isSecureContext||"execCommand"in document&&"function"==typeof document.execCommand),[]);return{isSuccessful:e,copyToClipboard:async e=>{if(!a){console.warn("Clipboard copy not available in this context");return}try{if(navigator.clipboard&&window.isSecureContext){try{let a=await C.TU.parse(e),s=new ClipboardItem({"text/html":new Blob([a],{type:"text/html"}),"text/plain":new Blob([e],{type:"text/plain"})});await navigator.clipboard.write([s]),t(!0),setTimeout(()=>t(!1),2e3);return}catch(e){console.debug("Rich text copy failed, trying plain text:",e)}try{await navigator.clipboard.writeText(e),t(!0),setTimeout(()=>t(!1),2e3);return}catch(e){console.debug("Clipboard API failed, trying fallback:",e)}}if(document.execCommand)try{let a=document.createElement("textarea");if(a.value=e,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",a.setAttribute("readonly",""),document.body.appendChild(a),navigator.userAgent.match(/ipad|iphone/i)){let e=document.createRange();e.selectNodeContents(a);let t=window.getSelection();null==t||t.removeAllRanges(),null==t||t.addRange(e),a.setSelectionRange(0,999999)}else a.select();let s=document.execCommand("copy");if(document.body.removeChild(a),s){t(!0),setTimeout(()=>t(!1),2e3);return}}catch(e){console.error("execCommand fallback failed:",e)}console.error("All copy methods failed"),t(!1)}catch(e){console.error("Copy failed:",e),t(!1)}},canCopyToClipboard:a}}var S=a(92735),E=a(30401),_=a(78867),k=a(52410);let P={plaintext:".txt",javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css",json:".json"},R=e=>{let{className:t,children:a,node:s,...i}=e,{isSuccessful:l,copyToClipboard:o,canCopyToClipboard:d}=A(),c=null==t?void 0:t.match(/language-(\w+)/),u=c?c[1]:"plaintext",m=s?(0,k.mY)(s):void 0,p=String(a).trim();return m?(0,n.jsx)("code",{className:t,...i,children:a}):(0,n.jsxs)("div",{className:"relative w-full bg-zinc-900 font-sans",children:[(0,n.jsxs)("div",{className:"flex w-full items-center justify-between bg-zinc-800 px-6 py-2 pr-4 text-zinc-100",children:[(0,n.jsx)("span",{className:"text-xs lowercase",children:u}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsxs)(g.A,{onPress:()=>{let e=P[u]||".file",t="file-".concat((0,r.Ox)()).concat(e),a=window.prompt("Enter file name",t);if(!a)return;let s=new Blob([p],{type:"text/plain"}),i=URL.createObjectURL(s),n=document.createElement("a");n.download=a,n.href=i,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)},size:"sm",variant:"light",className:"text-zinc-300",isIconOnly:!0,children:[(0,n.jsx)(S.Z,{size:16}),(0,n.jsx)("span",{className:"sr-only",children:"Download"})]}),d&&(0,n.jsxs)(g.A,{onPress:()=>{l||o(p)},size:"sm",variant:"light",className:"text-zinc-300",isIconOnly:!0,children:[l?(0,n.jsx)(E.Z,{size:16}):(0,n.jsx)(_.Z,{size:16}),(0,n.jsx)("span",{className:"sr-only",children:"Copy code"})]})]})]}),(0,n.jsx)(k.ZP,{language:u||"plaintext",theme:"ayu-dark",showLanguage:!1,delay:150,...i,children:String(a).trim()})]})};var T=a(33145),O=a(71931);a(83079);var U=a(12119),D=(0,U.$)("28bdcc34df376509f544c4d72f8a9e18036dafc0"),L=a(20785),K=a(21567),G=a(38286),F=a(64940),z=a(90766),V=a(33210);let q=e=>{let{children:t,href:a}=e,{accentColors:s}=(0,v.X)(),{isOpen:i,onOpenChange:l,onOpen:r}=(0,L.q)(),o=(0,I.useMemo)(()=>(0,n.jsx)("iframe",{src:a,width:"100%",height:"100%"},a),[a]);return(null==a?void 0:a.includes("workflow.mindpal.space"))||(null==a?void 0:a.includes("workflow.getmindpal.com"))?(0,n.jsx)("div",{className:"w-full px-2",children:(0,n.jsxs)(K.w,{className:"relative my-6 h-[60vh] w-full",children:[!1,o,(0,n.jsx)(G.R,{isOpen:i,onOpenChange:l,size:"5xl",closeButton:(0,n.jsx)(g.A,{isIconOnly:!0,size:"sm",variant:"solid",color:"primary",children:(0,n.jsx)(V.Z,{size:16,className:"text-default-100"})}),classNames:{closeButton:"hover:bg-primary-400"},children:(0,n.jsx)(F.A,{className:"h-[90vh]",children:(0,n.jsx)(z.I,{className:"h-full p-0",children:o})})})]})}):(0,n.jsx)(y.O,{href:a,isExternal:!0,style:{color:s.baseColor},size:"sm",className:"text-sm",children:null==t?void 0:t[0]})},B=(0,I.memo)(e=>{let{src:t,alt:a}=e,[s,i]=(0,I.useState)(!0),[l,r]=(0,I.useState)(null),[o,d]=(0,I.useState)(t),c=(0,O.y1)(async()=>{i(!0),r(null);try{if((null==t?void 0:t.startsWith("mindpal_copilot/image/"))||(null==t?void 0:t.startsWith("code_interpreter/"))){let e=await D({s3FilePath:t});d(e.url)}else d((null==t?void 0:t.startsWith("//"))?"https:".concat(t):t)}catch(e){console.error("Error fetching image URL:",e),r("Failed to load image"),d(t)}finally{i(!1)}},2e3);return((0,I.useEffect)(()=>{c()},[t]),s)?(0,n.jsx)(w.X,{className:"h-48 w-full rounded-lg"}):l?(0,n.jsx)("p",{className:"text-center text-sm text-danger",children:l}):(null==o?void 0:o.startsWith("https://"))||(null==o?void 0:o.startsWith("/"))?(0,n.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,n.jsx)(T.default,{src:o,alt:a||"",className:"h-auto w-full rounded-lg",width:500,height:300,loading:"lazy"},o)}):(0,n.jsx)(n.Fragment,{})},(e,t)=>e.src===t.src&&e.alt===t.alt);B.displayName="CustomImageBlock";let W=(0,I.memo)(e=>{let{text:t,className:a}=e,s=(0,I.useMemo)(()=>({a:q,img:B,code:R}),[]);return(0,n.jsx)(N.D,{className:(0,b.cn)("prose prose-sm max-w-none overflow-x-auto prose-pre:p-0",a),remarkPlugins:[j.Z],components:s,children:t||""})},(e,t)=>e.text===t.text&&e.className===t.className);var M=a(48614),Y=a(39857),Z=a(82222),H=a(52636);function X(e){let[t,a]=(0,I.useState)(""),[s,i]=(0,I.useState)(!1);return(0,I.useEffect)(()=>{if(!e){a(""),i(!1);return}e.startsWith("http://")||e.startsWith("https://")?(a(e),i(!1)):(i(!0),D({s3FilePath:e}).then(t=>{(null==t?void 0:t.url)?a(t.url):(console.warn("No URL returned for S3 path:",e),a(""))}).catch(t=>{console.error("Failed to get document URL for S3 path:",e,t),a("")}).finally(()=>{i(!1)}))},[e]),{displayUrl:t,isLoading:s}}function Q(e){let{messages:t=[]}=e,{chatbotData:a,clearSession:s}=(0,v.X)(),{displayUrl:i,isLoading:l}=X(a.avatarUrl),r=t.length<=1;return(0,n.jsx)(M.M,{mode:"wait",children:r?(0,n.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,y:-20},transition:{duration:.3},className:"mx-auto flex w-full max-w-screen-md flex-col items-center justify-center px-4 py-4 md:py-6",children:(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-3 text-center",children:[(a.avatarUrl||l)&&(0,n.jsx)(Y.E.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.3,delay:.1},children:(0,n.jsx)(d.O,{isOneChar:!0,size:"lg",color:"success",placement:"bottom-right",className:"bottom-3 right-3",children:l?(0,n.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-default-100",children:(0,n.jsx)(c.c,{size:"sm"})}):i?(0,n.jsx)(u.h,{size:"lg",src:i,className:"h-20 w-20"}):(0,n.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-default-100",children:(0,n.jsx)(Z.Z,{className:"h-10 w-10 text-default-400"})})})}),(0,n.jsxs)(Y.E.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3,delay:.2},className:"flex flex-col items-center gap-2 px-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-default-700 md:text-3xl",children:a.name}),(0,n.jsx)(W,{text:a.desc||"",className:"".concat(a.desc?a.desc.length>=400?"max-w-none":a.desc.length>=200?"max-w-md":"max-w-sm":"max-w-none"," text-center text-default-500")})]})]})},"centered-header"):(0,n.jsx)(Y.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},children:(0,n.jsxs)(m.R,{maxWidth:"md",shouldHideOnScroll:!0,className:"bg-default-50",children:[(a.avatarUrl||l)&&(0,n.jsxs)(p.H,{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)(d.O,{isOneChar:!0,size:"sm",color:"success",placement:"bottom-right",className:"bottom-1 right-1 h-3 w-3",children:l?(0,n.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-default-100",children:(0,n.jsx)(c.c,{size:"sm"})}):i?(0,n.jsx)(u.h,{size:"sm",src:i}):(0,n.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-default-100",children:(0,n.jsx)(Z.Z,{className:"h-4 w-4 text-default-400"})})}),(0,n.jsx)("p",{className:"font-bold text-default-700",children:a.name})]}),!a.avatarUrl&&!l&&(0,n.jsx)(p.H,{children:(0,n.jsx)("p",{className:"font-bold text-default-700",children:a.name})}),(0,n.jsx)(f.U,{justify:"end",children:(0,n.jsx)(x.k,{children:(0,n.jsx)(h.e,{content:"New chat",children:(0,n.jsx)(g.A,{color:"primary",onClick:()=>{s(),window.location.reload()},variant:"light",size:"sm",isIconOnly:!0,children:(0,n.jsx)(H.Z,{className:"h-4 w-4"})})})})})]})},"navbar-header")})}var J=a(19525),$=a(40875);function ee(e){let{text:t}=e;return(0,n.jsx)(W,{text:t})}var et=a(15001),ea=a(22252),es=a(66901),ei=a(91723);let en=e=>"object"==typeof e&&null!==e&&("parts"in e&&Array.isArray(e.parts)||"content"in e&&Array.isArray(e.content)),el=(0,I.memo)(function(e){let{tool:t,showAgentData:a=!0,showToolCalls:s=!0,showKnowledgeSourceContext:i=!0}=e,l="object"==typeof t.input&&null!==t.input&&"agentId"in t.input&&"string"==typeof t.input.agentId?t.input.agentId:void 0,o="object"==typeof t.input&&null!==t.input&&"activityLog"in t.input&&"string"==typeof t.input.activityLog?t.input.activityLog:void 0,d="output-available"!==t.state||!t.output,[c,u]=(0,I.useState)(d);(0,I.useEffect)(()=>{d&&u(!0)},[d]);let m=t.output,p=en(m),f=p&&"error"in m,x=p&&"object"==typeof m&&"delegationDepth"in m?m.delegationDepth:void 0,h=p&&"object"==typeof m&&"delegationPath"in m?m.delegationPath:void 0,g=p&&!f?m.parts?[{id:(0,r.Ox)(),role:"assistant",parts:m.parts,metadata:{agentId:null!=l?l:null,delegationDepth:x,delegationPath:h}}]:m.content?function(e,t){let a=new Map;for(let t of e)if("tool"===t.role&&"string"!=typeof t.content)for(let e of t.content)"string"!=typeof e&&"tool-result"===e.type&&a.set(e.toolCallId,e.output);let s=[];for(let i of e)switch(i.role){case"user":{let e="string"==typeof i.content?i.content:i.content.filter(e=>"text"===e.type).map(e=>"text"===e.type?e.text:"").join("\n");s.push({id:(0,r.Ox)(),role:"user",parts:[{type:"text",text:e}]});break}case"assistant":{let e="string"==typeof i.content?i.content:i.content.filter(e=>"text"===e.type).map(e=>"text"===e.type?e.text:"").join("\n"),n=[];if(e&&n.push({type:"text",text:e}),"string"!=typeof i.content){for(let e of i.content)if("tool-call"===e.type&&"string"!=typeof e){let t=a.get(e.toolCallId);void 0!==t?n.push({type:"dynamic-tool",toolCallId:e.toolCallId,toolName:e.toolName,state:"output-available",input:e.input,output:t&&"object"==typeof t&&"type"in t&&"value"in t?t.value:t}):n.push({type:"dynamic-tool",toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input})}}s.push({id:(0,r.Ox)(),role:"assistant",metadata:{agentId:null!=t?t:null},parts:n.length>0?n:[{type:"text",text:""}]})}}return s}(m.content,l):[]:[],v={1:{bg:"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-950/30 dark:to-blue-900/20",border:"border-blue-200 dark:border-blue-800",badge:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",accent:"text-blue-600 dark:text-blue-400"},2:{bg:"bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-950/30 dark:to-purple-900/20",border:"border-purple-200 dark:border-purple-800",badge:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",accent:"text-purple-600 dark:text-purple-400"},3:{bg:"bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-950/30 dark:to-orange-900/20",border:"border-orange-200 dark:border-orange-800",badge:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",accent:"text-orange-600 dark:text-orange-400"},default:{bg:"bg-gradient-to-br from-red-50 to-red-100/50 dark:from-red-950/30 dark:to-red-900/20",border:"border-red-200 dark:border-red-800",badge:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",accent:"text-red-600 dark:text-red-400"}},y=x?v[x]||v.default:{bg:"bg-gradient-to-br from-default-50 to-default-100/50",border:"border-default-200",badge:"bg-default-100 text-default-700",accent:"text-default-600"};return(0,n.jsxs)(K.w,{className:"flex h-full w-full flex-col border-2 ".concat(y.border," ").concat(y.bg," shadow-sm transition-all duration-200 hover:shadow-md"),shadow:"none",style:{marginLeft:x?"".concat((x-1)*16,"px"):"0px",marginTop:"8px",marginBottom:"8px"},children:[(0,n.jsxs)("button",{type:"button",onClick:()=>u(!c),className:"group flex w-full items-center gap-3 px-4 py-3 text-left transition-opacity hover:opacity-90",children:[(0,n.jsx)("div",{className:"flex-shrink-0 ".concat(y.accent),children:d?(0,n.jsx)(et.Z,{size:20,className:"animate-spin"}):f?(0,n.jsx)(ea.Z,{size:20,className:"text-danger"}):(0,n.jsx)(es.Z,{size:20,className:"text-success"})}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsxs)("div",{className:"mb-1 flex flex-wrap items-center gap-2",children:[(0,n.jsx)("h2",{className:"truncate text-sm font-bold",children:"Sub-Agent Delegation"}),x&&(0,n.jsxs)("span",{className:"".concat(y.badge," inline-flex min-w-[24px] items-center justify-center rounded-md px-1.5 py-0.5 font-mono text-[10px] font-semibold"),children:["L",x]}),d&&(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(ei.Z,{size:12,className:y.accent}),(0,n.jsx)("span",{className:"text-[10px] font-medium ".concat(y.accent),children:"Working..."})]})]}),o&&(0,n.jsx)("p",{className:"text-xs font-medium ".concat(y.accent," truncate"),children:o})]}),(0,n.jsx)($.Z,{size:18,className:"flex-shrink-0 transition-transform duration-300 ".concat(y.accent," ").concat(c?"rotate-180":""," group-hover:scale-110")})]}),c&&(0,n.jsx)("div",{className:"flex-1 overflow-y-auto border-t-2 ".concat(y.border," bg-white/50 dark:bg-black/20"),children:f?(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border-l-4 border-danger bg-danger-50 p-3 dark:bg-danger-900/20",children:[(0,n.jsx)(ea.Z,{size:18,className:"mt-0.5 flex-shrink-0 text-danger"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"mb-1 text-sm font-semibold text-danger",children:"Delegation Failed"}),(0,n.jsx)("p",{className:"text-xs text-danger/80",children:m&&"object"==typeof m&&"error"in m&&"string"==typeof m.error?m.error:"An error occurred during delegation"})]})]})}):(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)(e7,{isLoading:d,messageActionsPlacement:"bottom",messageContainerClassNames:"ml-0",messages:g,showContentToggle:!1,hideAgentChip:!0,showAgentData:a,showToolCalls:s,showKnowledgeSourceContext:i})})})]})});el.displayName="AgentUseToolInvocation";var er=a(45557);function eo(e){let{index:t,title:a,href:s}=e,[i,l]=(0,I.useState)(null),[r,o]=(0,I.useState)("");return(0,I.useEffect)(()=>{if(s.startsWith("/"))l(window.location.hostname);else try{l(new URL(s).hostname)}catch(e){console.error("Invalid URL:",e),l(null)}},[]),(0,n.jsxs)(g.A,{as:g.A,onPress:()=>{window.open(s,"_blank")},className:"flex h-full w-full cursor-pointer flex-col items-start justify-start gap-1 whitespace-pre-line bg-default-100 p-3 text-left shadow-none duration-150 hover:bg-default-200",children:[(0,n.jsx)("h3",{className:"wrap line-clamp-3 text-sm md:line-clamp-2",children:a}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-default-600",children:[(0,n.jsx)("p",{className:"text-xs",children:t}),(0,n.jsx)("div",{className:"flex flex-none items-center justify-center rounded-full",children:(0,n.jsx)("span",{className:"h-3 w-3 flex-shrink-0",children:(0,n.jsx)(T.default,{src:r,alt:"favicon",width:12,height:12})})}),(0,n.jsx)("p",{className:"text-xs text-default-400",children:i})]})]})}function ed(e){let{referenceList:t}=e,[a,s]=(0,I.useState)(!1),[i,l]=(0,I.useState)(!1);return(0,n.jsxs)("div",{className:"flex w-full flex-col items-start ".concat(a?"gap-2":"gap-0"),children:[(0,n.jsx)(g.A,{variant:"light",size:"sm",className:"h-auto w-full justify-between py-1 text-small font-normal text-default-500",endContent:(0,n.jsx)($.Z,{size:16,className:"transition-transform duration-200 ".concat(a?"rotate-180":"")}),onPress:()=>s(!a),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(er.Z,{size:16,className:"mt-1 shrink-0"}),(0,n.jsxs)("p",{className:"text-sm",children:["Researched ",t.length," sources"]})]})}),(0,n.jsx)("div",{className:"grid transition-all duration-200 ".concat(a?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr]"),children:(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsxs)("ul",{className:"grid grid-cols-2 gap-2 md:grid-cols-4",children:[(i?t:t.slice(0,3)).filter(e=>{try{if(!e.href)return!1;return new URL(e.href),!0}catch(e){return console.log(e),!1}}).map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)(eo,{index:t+1,title:e.title,href:e.href})},t)),t.length>4&&!i&&(0,n.jsx)("li",{children:(0,n.jsx)(g.A,{onPress:()=>l(!0),color:"default",variant:"flat",className:"h-full w-full text-default-500",children:(0,n.jsxs)("p",{className:"text-sm",children:["View ",t.length-3," more"]})})})]})})})]})}function ec(e){let{toolInvocation:t}=e,a=t.output&&"object"==typeof t.output?t.output:null;return a?(0,n.jsx)("div",{className:"flex flex-col gap-2 rounded-lg bg-default-50 p-3",children:(0,n.jsx)(ed,{referenceList:a.metadata.reduce((e,t)=>e.find(e=>e.href===t.url)?e:[...e,{index:e.length,title:t.title||"Note",href:t.url}],[])})}):(0,n.jsx)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 px-6 py-3",children:(0,n.jsx)("div",{className:"flex items-center justify-between py-1 text-default-500",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),(0,n.jsx)("p",{className:"text-sm",children:"Researching from knowledge sources..."})]})})})}function eu(e){var t;let{toolInvocation:a}=e,s=null===(t=a.input)||void 0===t?void 0:t.query,i=a.output&&"object"==typeof a.output&&"urls"in a.output&&Array.isArray(a.output.urls)?a.output:null;return i?(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg bg-default-50 p-3",children:[(0,n.jsxs)("p",{className:"text-sm text-default-500",children:["Search results",s&&' for "'.concat(s,'"')]}),(0,n.jsx)(ed,{referenceList:i.urls.map((e,t)=>({index:t,title:"",href:e}))})]}):(0,n.jsx)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 px-6 py-3",children:(0,n.jsx)("div",{className:"flex items-center justify-between py-1 text-default-500",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(et.Z,{size:14,className:"flex-shrink-0 animate-spin"}),(0,n.jsxs)("p",{className:"text-sm",children:["Searching web",s&&' for "'.concat(s,'"'),"..."]})]})})})}var em=a(29525);function ep(e){let{toolInvocation:t}=e,[a,s]=(0,I.useState)(!1),[i,l]=(0,I.useState)(!1);return(0,n.jsx)("div",{className:"flex flex-col gap-2 rounded-lg bg-default-50 p-3",children:(0,n.jsxs)("div",{className:"flex w-full items-start gap-2 overflow-hidden",children:[t.output?(0,n.jsx)(em.Z,{size:16,className:"mt-1 shrink-0"}):(0,n.jsx)(et.Z,{size:16,className:"mt-1 animate-spin"}),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,n.jsx)("span",{className:"ml-2 text-base",children:t.toolName}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(g.A,{variant:"light",size:"sm",className:"h-auto w-full justify-between py-1 text-small font-normal text-default-500",endContent:(0,n.jsx)($.Z,{size:16,className:"transition-transform duration-200 ".concat(a?"rotate-180":"")}),onPress:()=>s(!a),children:"Arguments"}),(0,n.jsx)("div",{className:"grid transition-all duration-200 ".concat(a?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsx)(W,{text:"```json\n".concat(JSON.stringify(t.input,null,2),"\n```")})})})}),"output-available"===t.state&&null!==t.output&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.A,{variant:"light",size:"sm",className:"mt-1 h-auto w-full justify-between py-1 text-small font-normal text-default-500",endContent:(0,n.jsx)($.Z,{size:16,className:"transition-transform duration-200 ".concat(i?"rotate-180":"")}),onPress:()=>l(!i),children:"Raw result"}),(0,n.jsx)("div",{className:"grid transition-all duration-200 ".concat(i?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsx)(W,{text:"```json\n".concat(JSON.stringify(t.output,null,2),"\n```")})})})})]})]})]})]})})}function ef(e){let{toolInvocation:t}=e,[a,s]=(0,I.useState)({}),i=t.output&&"object"==typeof t.output&&"result"in t.output&&"chart_images"in t.output?t.output:null;return((0,I.useEffect)(()=>{(null==i?void 0:i.chart_images)&&(async()=>{let e={};for(let t of i.chart_images)try{let a=await D({s3FilePath:t.s3_file_path});e[t.s3_file_path]=a.url}catch(e){console.error("Error fetching image URL:",e)}s(e)})()},[null==i?void 0:i.chart_images]),i)?(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg bg-default-50 p-3",children:[i.result&&(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsx)(W,{text:"```\n".concat(i.result,"\n```")})}),i.chart_images&&i.chart_images.length>0&&(0,n.jsx)("div",{className:"flex flex-col gap-2",children:i.chart_images.map((e,t)=>(0,n.jsx)("div",{className:"relative",children:a[e.s3_file_path]?(0,n.jsx)("img",{src:a[e.s3_file_path],alt:"Chart ".concat(t+1),className:"max-w-full rounded-lg"}):(0,n.jsx)("div",{className:"flex items-center justify-center rounded-lg bg-default-100 p-4",children:(0,n.jsx)(et.Z,{size:20,className:"animate-spin text-default-500"})})},t))})]}):(0,n.jsx)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 px-6 py-3",children:(0,n.jsx)("div",{className:"flex items-center justify-between py-1 text-default-500",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),(0,n.jsx)("p",{className:"text-sm",children:"Executing code..."})]})})})}var ex=a(33073);function eh(e){var t;let{toolInvocation:a}=e;a.toolName.split("INTEGRATION_COMPOSIO_")[1];let s=null!==(t=a.output)&&void 0!==t?t:null,i=JSON.stringify(s).includes("[AUTHENTICATION REQUIRED]"),[l,r]=(0,I.useState)(!1),[o,d]=(0,I.useState)(!1);return(0,n.jsx)("div",{className:"flex flex-col gap-2 rounded-lg bg-default-50 p-3",children:(0,n.jsx)("div",{className:"flex items-center justify-between py-1 text-default-500",children:(0,n.jsxs)("div",{className:"flex w-full items-start gap-2 overflow-hidden",children:[(0,n.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full",children:s?(0,n.jsx)(ex.Z,{size:16}):(0,n.jsx)(et.Z,{size:16,className:"animate-spin"})}),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,n.jsx)("p",{className:"ml-3 text-base text-default-800",children:a.toolName}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(g.A,{variant:"light",size:"sm",className:"h-auto w-full justify-between py-1 font-normal text-default-500 text-small",endContent:(0,n.jsx)($.Z,{size:16,className:"transition-transform duration-200 ".concat(l?"rotate-180":"")}),onPress:()=>r(!l),children:"Arguments"}),(0,n.jsx)("div",{className:"grid transition-all duration-200 ".concat(l?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsx)(W,{text:"```json\n".concat(JSON.stringify(a.input,null,2),"\n```")})})})}),"output-available"===a.state&&null!==a.output&&!i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.A,{variant:"light",size:"sm",className:"mt-1 h-auto w-full justify-between py-1 font-normal text-default-500 text-small",endContent:(0,n.jsx)($.Z,{size:16,className:"transition-transform duration-200 ".concat(o?"rotate-180":"")}),onPress:()=>d(!o),children:"Raw result"}),(0,n.jsx)("div",{className:"grid transition-all duration-200 ".concat(o?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsx)(W,{text:"```json\n".concat(JSON.stringify(a.output,null,2),"\n```")})})})})]})]})]})]})})})}var eg=a(29),ev=a.n(eg),ey=a(98218),ew=a(71769),eb=a(65866);function eN(e){let{toolInvocation:t}=e,a=(0,I.useMemo)(()=>{if("output-available"===t.state){let e=t.output;if(e&&"object"==typeof e&&"flashcards_data"in e)try{let t=e.flashcards_data;t=t.replace(/'/g,'"');let a=JSON.parse(t);if(a&&"object"==typeof a&&"flashcards_data"in a&&Array.isArray(a.flashcards_data))return a.flashcards_data;if(Array.isArray(a))return a;eb.Am.warning("Flashcards data is not an array")}catch(e){eb.Am.warning("Could not parse flashcards data")}}return null},[t]),[s,i]=(0,I.useState)({}),l=e=>{i(t=>({...t,[e]:!t[e]}))};return a?(0,n.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 p-3",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,n.jsx)(ew.Z,{size:20,className:"text-default-400"}),(0,n.jsx)("span",{className:"text-base font-medium",children:"Flashcards"})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:a.map((e,t)=>(0,n.jsxs)("div",{onClick:()=>l(t),style:{perspective:800},className:"jsx-e31344e8be968b6b relative h-48 w-full cursor-pointer select-none",children:[(0,n.jsxs)("div",{className:"jsx-e31344e8be968b6b "+"relative h-full w-full transition-transform duration-300 [transform-style:preserve-3d] ".concat(s[t]?"rotate-y-180":""),children:[(0,n.jsx)("div",{className:"jsx-e31344e8be968b6b absolute inset-0 h-full w-full [backface-visibility:hidden]",children:(0,n.jsx)(K.w,{className:"h-full w-full overflow-hidden rounded-xl shadow-lg",children:(0,n.jsxs)(ey.G,{className:"flex h-full flex-col items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"jsx-e31344e8be968b6b break-words text-center text-base font-semibold text-default-700",children:e.frontContent}),(0,n.jsx)("div",{className:"jsx-e31344e8be968b6b mt-2 text-xs text-default-400",children:"Click to reveal"})]})})}),(0,n.jsx)("div",{className:"jsx-e31344e8be968b6b rotate-y-180 absolute inset-0 h-full w-full [backface-visibility:hidden]",children:(0,n.jsx)(K.w,{className:"h-full w-full overflow-hidden rounded-xl bg-default-100 shadow-lg",children:(0,n.jsxs)(ey.G,{className:"flex h-full flex-col items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"jsx-e31344e8be968b6b break-words text-center text-base text-default-500",children:e.backContent}),(0,n.jsx)("div",{className:"jsx-e31344e8be968b6b mt-2 text-xs text-default-400",children:"Click to hide"})]})})})]}),(0,n.jsx)(ev(),{id:"e31344e8be968b6b",children:".rotate-y-180.jsx-e31344e8be968b6b{-webkit-transform:rotatey(180deg);-moz-transform:rotatey(180deg);-ms-transform:rotatey(180deg);-o-transform:rotatey(180deg);transform:rotatey(180deg)}"})]},t))})]}):(0,n.jsx)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 px-6 py-3",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 py-1 text-default-500",children:[(0,n.jsx)(et.Z,{size:16,className:"animate-spin"}),(0,n.jsx)("span",{className:"text-sm",children:"Generating flashcards..."})]})})}var ej=a(14760),eI=a(38011);let eC=new(a(54586)).$T;function eA(e){let{toolInvocation:t}=e,a=(0,I.useRef)(null),s=(0,I.useRef)(null),i=(0,I.useMemo)(()=>{let e=t.output?t.output:null;return e&&"object"==typeof e&&"markmap_data"in e&&"string"==typeof e.markmap_data?e.markmap_data:null},[t]);return((0,I.useEffect)(()=>{if(a.current&&i){s.current&&s.current.destroy();let e=eC.transform(i);s.current=eI.v$.create(a.current,{},e.root)}},[i]),(0,I.useEffect)(()=>()=>{s.current&&s.current.destroy()},[]),i)?(0,n.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 p-3",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,n.jsx)(ej.Z,{size:20,className:"text-default-400"}),(0,n.jsx)("span",{className:"text-base font-medium",children:"Mindmap"})]}),(0,n.jsx)(K.w,{className:"w-full overflow-hidden rounded-xl shadow-lg",children:(0,n.jsxs)(ey.G,{className:"flex h-full flex-col p-0",children:[" ",(0,n.jsx)("svg",{ref:a,className:"h-96 w-full"})," "]})})]}):(0,n.jsx)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 px-6 py-3",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 py-1 text-default-500",children:[(0,n.jsx)(et.Z,{size:16,className:"animate-spin"}),(0,n.jsx)("span",{className:"text-sm",children:"Generating mindmap..."})]})})}var eS=a(24838),eE=a(53113);function e_(e){var t;let{toolInvocation:a}=e,[s,i]=(0,I.useState)(!0),l=null===(t=a.input)||void 0===t?void 0:t.query,r=(0,I.useMemo)(()=>{if("output-available"===a.state&&a.output&&"object"==typeof a.output){let e=a.output;if("photos"in e&&Array.isArray(e.photos))return{photos:e.photos,page:1,per_page:e.photos.length,total_results:e.photos.length}}return null},[a]),o=(null==r?void 0:r.photos)||null;return o?0===o.length?(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[(0,n.jsx)(eE.Z,{size:14}),"No images found",l&&' for "'.concat(l,'"')]})}):(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("button",{onClick:()=>i(!s),className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[(0,n.jsx)(eE.Z,{size:14}),"Found ",o.length," stock images from Pexels",l&&' for "'.concat(l,'"'),(0,n.jsx)($.Z,{size:14,className:"transition-transform duration-200 ".concat(s?"rotate-180":"")})]}),(0,n.jsx)(M.M,{initial:!1,children:s&&(0,n.jsx)(Y.E.div,{initial:"collapsed",animate:"expanded",exit:"collapsed",variants:{collapsed:{height:0,opacity:0,marginTop:0,marginBottom:0},expanded:{height:"auto",opacity:1,marginTop:"1rem",marginBottom:"0.5rem"}},transition:{duration:.2,ease:"easeInOut"},style:{overflow:"hidden"},className:"flex flex-col gap-4 border-l-2 border-default-200 pl-4",children:(0,n.jsx)(eS.o,{orientation:"horizontal",className:"flex gap-4 overflow-x-auto",children:o.map(e=>(0,n.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:(0,n.jsx)(K.w,{className:"w-48 border shadow-none",children:(0,n.jsxs)(ey.G,{className:"flex h-full flex-col p-0",children:[(0,n.jsx)("img",{src:e.src.medium,alt:e.alt,className:"h-48 w-full object-cover"}),(0,n.jsxs)("div",{className:"truncate p-3 text-sm text-default-600",children:["Photo by ",e.photographer]})]})})},e.id))})},"content")})]}):(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),"Searching for images",l&&' for "'.concat(l,'"'),"..."]})})}var ek=a(29374);function eP(e){var t;let{toolInvocation:a}=e,[s,i]=(0,I.useState)(!0),l=null===(t=a.input)||void 0===t?void 0:t.query,r=(0,I.useMemo)(()=>{if("output-available"===a.state&&a.output&&"object"==typeof a.output){let e=a.output;if("videos"in e&&Array.isArray(e.videos))return{videos:e.videos,page:1,per_page:e.videos.length,total_results:e.videos.length}}return null},[a]),o=(null==r?void 0:r.videos)||null;if(!o)return(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),"Searching for videos",l&&' for "'.concat(l,'"'),"..."]})});if(0===o.length)return(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[(0,n.jsx)(ek.Z,{size:14}),"No videos found",l&&' for "'.concat(l,'"')]})});let d=e=>{for(let t of["hd","sd"]){let a=e.find(e=>e.quality===t&&"video/mp4"===e.file_type);if(a)return a.link}let t=e.find(e=>"video/mp4"===e.file_type);return null==t?void 0:t.link};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("button",{onClick:()=>i(!s),className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[(0,n.jsx)(ek.Z,{size:14}),"Found ",o.length," stock videos from Pexels",l&&' for "'.concat(l,'"'),(0,n.jsx)($.Z,{size:14,className:"transition-transform duration-200 ".concat(s?"rotate-180":"")})]}),(0,n.jsx)(M.M,{initial:!1,children:s&&(0,n.jsx)(Y.E.div,{initial:"collapsed",animate:"expanded",exit:"collapsed",variants:{collapsed:{height:0,opacity:0,marginTop:0,marginBottom:0},expanded:{height:"auto",opacity:1,marginTop:"1rem",marginBottom:"0.5rem"}},transition:{duration:.2,ease:"easeInOut"},style:{overflow:"hidden"},className:"flex flex-col gap-4 border-l-2 border-default-200 pl-4",children:(0,n.jsx)(eS.o,{orientation:"horizontal",className:"flex gap-4 overflow-x-auto",children:o.map(e=>{let t=d(e.video_files);return t?(0,n.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:(0,n.jsx)(K.w,{className:"w-48 border shadow-none",children:(0,n.jsxs)(ey.G,{className:"flex h-full flex-col p-0",children:[(0,n.jsxs)("video",{controls:!0,className:"h-48 w-full object-cover",poster:e.image,children:[(0,n.jsx)("source",{src:t,type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,n.jsxs)("div",{className:"truncate p-3 text-sm text-default-600",children:["Video by ",e.user.name]})]})})},e.id):null})})},"content")})]})}var eR=a(77139),eT=a(88893),eO=a(76858),eU=a(40328),eD=a(93340),eL=a(28169);let eK={documentId:null,content:"",kind:eD.ArtifactKind.TEXT,title:"",status:"idle",isVisible:!1,boundingBox:{top:0,left:0,width:0,height:0}};function eG(){let{originKey:e}=(0,eL.A)(),{data:t,mutate:a}=(0,eU.ZP)("artifact-".concat(e),null,{fallbackData:eK}),s=(0,I.useMemo)(()=>t||eK,[t]),i=(0,I.useCallback)(e=>{a(t=>{let a=t||eK;return"function"==typeof e?e(a):e})},[a]),{data:n,mutate:l}=(0,eU.ZP)(()=>s.documentId?"artifact-metadata-".concat(s.documentId):null,null,{fallbackData:null});return(0,I.useMemo)(()=>({artifact:s,setArtifact:i,metadata:n,setMetadata:l}),[s,i,n,l])}var eF=a(64952),ez=a(6922);let eV={[eD.ArtifactKind.TEXT]:eR.Z,[eD.ArtifactKind.HTML]:eF.Z,[eD.ArtifactKind.CAROUSEL]:ez.Z},eq=(e,t)=>{switch(e){case"create":return"present"===t?"Creating":"Created";case"update":return"present"===t?"Updating":"Updated";case"read":return"present"===t?"Reviewing":"Reviewed";default:return""}},eB=(0,I.memo)(function(e){var t,a;let{toolInvocation:s,isReadonly:i=!1}=e,{artifact:l,setArtifact:r}=eG(),o=s.toolName,d="create_canvas"===o?"create":"read_canvas"===o?"read":"update",c=s.input,u=s.output?s.output:null,m=(null==u?void 0:null===(t=u.title)||void 0===t?void 0:t.trim())||(null==c?void 0:null===(a=c.title)||void 0===a?void 0:a.trim())?(null==u?void 0:u.title)||(null==c?void 0:c.title):null,p=(null==u?void 0:u.kind)||(null==c?void 0:c.kind);if("read"===d)return(0,n.jsxs)("div",{className:"flex items-center gap-2 py-2 text-sm text-default-400",children:[(0,n.jsx)("div",{children:"output-available"!==s.state?(0,n.jsx)(et.Z,{className:"h-4 w-4 flex-shrink-0 animate-spin"}):(0,n.jsx)(E.Z,{className:"h-4 w-4 flex-shrink-0"})}),(0,n.jsx)("p",{className:"max-w-full truncate",children:"".concat(eq(d,"output-available"!==s.state?"present":"past")).concat(m?' "'.concat(m,'"'):"")})]});let f=p?eV[p]:null;return(0,n.jsx)(g.A,{onClick:e=>{if(i){eb.Am.error("Viewing files in shared chats is currently not supported.");return}let t=e.currentTarget.getBoundingClientRect(),a={top:t.top,left:t.left,width:t.width,height:t.height};if("output-available"===s.state){let e=s.output;r({documentId:e.id,kind:e.kind,content:"",title:e.title,isVisible:!0,status:"idle",boundingBox:a})}else r(e=>({...e,isVisible:!0,boundingBox:a}))},variant:"flat",color:l.documentId===(null==u?void 0:u.id)&&l.isVisible?"primary":"default",fullWidth:!0,startContent:"create"===d?f?(0,n.jsx)(f,{className:"h-4 w-4 flex-shrink-0"}):(0,n.jsx)(eR.Z,{className:"h-4 w-4 flex-shrink-0"}):"update"===d?(0,n.jsx)(eT.Z,{className:"h-4 w-4 flex-shrink-0"}):null,endContent:"output-available"!==s.state?(0,n.jsx)(et.Z,{className:"h-4 w-4 flex-shrink-0 animate-spin"}):l.documentId===(null==u?void 0:u.id)&&l.isVisible?null:(0,n.jsx)(eO.Z,{className:"h-4 w-4 flex-shrink-0"}),className:"flex flex-row justify-start gap-3",children:(0,n.jsxs)("p",{className:"max-w-full truncate",children:["".concat(eq(d,"output-available"!==s.state?"present":"past")).concat(m?' "'.concat(m,'"'):"")," ",p&&"(".concat(p,")")]})})},(e,t)=>e.toolInvocation.state===t.toolInvocation.state);var eW=a(34853),eM=a(40519),eY=a(9343),eZ=a(10407);function eH(e){let{toolInvocation:t}=e,[a,s]=(0,I.useState)(!0),i="output-available"!==t.state,l="output-available"===t.state&&t.output&&"object"==typeof t.output?t.output:null,r=l&&!l.success,o=l&&l.success,d=e=>{switch(e){case"completed":return(0,n.jsx)(es.Z,{size:16,className:"text-success-500"});case"in_progress":return(0,n.jsx)(eW.Z,{size:16,className:"text-primary-500"});default:return(0,n.jsx)(eM.Z,{size:16,className:"text-default-300"})}},c=e=>{switch(e){case"completed":return"text-default-400 line-through";case"in_progress":return"text-primary-600 font-medium";default:return"text-default-600"}};if(i)return(0,n.jsxs)("div",{className:"inline-flex items-center gap-1.5 text-sm text-default-500",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),(0,n.jsx)("span",{className:"text-xs",children:"Planning tasks..."})]});if(r&&(null==l?void 0:l.error))return(0,n.jsxs)("div",{className:"inline-flex items-center gap-1.5 text-sm text-danger-600",children:[(0,n.jsx)(eY.Z,{size:14}),(0,n.jsxs)("span",{className:"text-xs",children:["Plan error: ",l.error]})]});if(!o||!(null==l?void 0:l.tasks)||0===l.tasks.length)return null;let{summary:u,tasks:m}=l;return(0,n.jsxs)("div",{className:"my-2 rounded-lg border border-default-200 bg-default-50/50 p-3",children:[(0,n.jsxs)("button",{onClick:()=>s(!a),className:"flex w-full items-center justify-between text-left",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eY.Z,{size:16,className:"text-primary-500"}),(0,n.jsx)("span",{className:"text-sm font-medium text-default-700",children:"Task Plan"}),u&&(0,n.jsxs)("span",{className:"text-xs text-default-500",children:[u.completed,"/",u.total," completed"]})]}),a?(0,n.jsx)($.Z,{size:16,className:"text-default-400"}):(0,n.jsx)(eZ.Z,{size:16,className:"text-default-400"})]}),a&&u&&(0,n.jsx)("div",{className:"mt-2 h-1.5 w-full overflow-hidden rounded-full bg-default-200",children:(0,n.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:"".concat(u.completed/u.total*100,"%")}})}),a&&(0,n.jsx)("div",{className:"mt-3 space-y-2",children:m.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)("div",{className:"mt-0.5",children:d(e.status)}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("p",{className:"text-sm ".concat(c(e.status)),children:"in_progress"===e.status?e.activeForm:e.content})})]},t))}),a&&u&&u.in_progress>0&&(0,n.jsxs)("div",{className:"mt-3 flex items-center gap-2 rounded-md bg-primary-50 px-2 py-1.5",children:[(0,n.jsx)(eW.Z,{size:14,className:"text-primary-500"}),(0,n.jsxs)("span",{className:"text-xs text-primary-600",children:["Currently: ",u.currentTask]})]})]})}function eX(e){let{toolInvocation:t}=e,a=t.output&&"object"==typeof t.output&&"image_url"in t.output?t.output:null;return a?(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg bg-default-50 p-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eE.Z,{size:20,className:"text-default-400"}),(0,n.jsx)("span",{className:"text-base font-medium",children:"Image Generated"})]}),a.image_url?(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("img",{src:a.image_url,alt:"Generated image",className:"max-w-full rounded-lg"})}):(0,n.jsx)("div",{className:"flex items-center justify-center rounded-lg bg-default-100 p-4",children:(0,n.jsx)("p",{className:"text-sm text-default-500",children:"Image could not be generated."})})]}):(0,n.jsx)("div",{className:"flex flex-col gap-3 rounded-lg bg-default-50 px-6 py-3",children:(0,n.jsx)("div",{className:"flex items-center justify-between py-1 text-default-500",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),(0,n.jsx)("p",{className:"text-sm",children:"Generating image..."})]})})})}var eQ=a(42042);let eJ={isVisible:!1,workflowRunId:null,workflowId:null,title:""};function e$(){let{originKey:e}=(0,eL.A)(),{data:t,mutate:a}=(0,eU.ZP)("workflow-side-panel-".concat(e),null,{fallbackData:eJ}),s=(0,I.useMemo)(()=>t||eJ,[t]),i=(0,I.useCallback)(e=>{a(t=>{let a=t||eJ;return"function"==typeof e?e(a):e})},[a]),n=(0,I.useCallback)((e,t,a)=>{i({isVisible:!0,workflowRunId:e,workflowId:t,title:a})},[i]),l=(0,I.useCallback)(()=>{i({isVisible:!1,workflowRunId:null,workflowId:null,title:""})},[i]);return(0,I.useMemo)(()=>({workflowSidePanel:s,setWorkflowUseSidePanel:i,openWorkflowUseSidePanel:n,closeWorkflowUseSidePanel:l}),[s,i,n,l])}var e0=a(41121),e1=(0,I.memo)(function(e){let{toolInvocation:t,isReadonly:a=!1}=e,{workflowSidePanel:s,openWorkflowUseSidePanel:i}=e$(),l=t.toolName,r=(null==l?void 0:l.replace("MINDPAL_WORKFLOW_",""))||"",{data:o}=e0.h.workflow.getById.useQuery({id:r},{enabled:!!r}),d=(null==o?void 0:o.title)||"Unknown Workflow",c=t.output?t.output:null;return(0,I.useEffect)(()=>{!a&&"output-available"===t.state&&(null==c?void 0:c.workflowRunId)&&r&&i(c.workflowRunId,r,d)},[t.state,null==c?void 0:c.workflowRunId,r,d,a,i]),(0,n.jsx)(g.A,{onPress:()=>{if(a){eb.Am.error("Viewing workflows in shared chats is currently not supported.");return}"output-available"===t.state&&(null==c?void 0:c.workflowRunId)?i(c.workflowRunId,r,d):eb.Am.info("Workflow is still being initialized. Please wait for completion.")},variant:"flat",color:s.workflowRunId===(null==c?void 0:c.workflowRunId)&&s.isVisible?"primary":"default",fullWidth:!0,startContent:(0,n.jsx)(eQ.Z,{className:"h-4 w-4 flex-shrink-0"}),endContent:"output-available"!==t.state?(0,n.jsx)(et.Z,{className:"h-4 w-4 flex-shrink-0 animate-spin"}):s.workflowRunId===(null==c?void 0:c.workflowRunId)&&s.isVisible?null:(0,n.jsx)(eO.Z,{className:"h-4 w-4 flex-shrink-0"}),className:"flex flex-row justify-start gap-3",children:(0,n.jsx)("p",{className:"max-w-full truncate",children:"output-available"!==t.state?'Starting "'.concat(d,'"'):'Started "'.concat(d,'"')})})},(e,t)=>e.toolInvocation.state===t.toolInvocation.state);let e2={web_search_1dfrse3e:{loading:"Searching the web",complete:"Searched the web"},get_context_from_provided_knowledge_sources_and_notes:{loading:"Looking up information",complete:"Looked up information"},execute_python:{loading:"Running calculations",complete:"Completed calculations"},generate_image_with_recraft:{loading:"Generating image",complete:"Image created"},generate_image_with_dalle:{loading:"Generating image",complete:"Image created"},nano_banana_image_generation:{loading:"Generating image",complete:"Image created"},generate_image_with_flux:{loading:"Generating image",complete:"Image created"}};function e3(e){let{toolInvocation:t}=e,{accentColors:a}=(0,v.X)(),s="output-available"===t.state,{message:i}=function(e,t){if(e.startsWith("INTEGRATION_COMPOSIO_"))return{message:t?"System operations completed":"System operations in progress"};let a=e2[e];return a?{message:t&&a.complete||a.loading}:{message:t?"Task completed":"Working on it"}}(t.toolName,s);return(0,n.jsx)(Y.E.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:10,scale:.95},transition:{duration:.3,ease:[.22,1,.36,1]},className:"inline-flex items-center gap-2 rounded-lg px-3 py-1.5",style:{backgroundColor:s?"".concat(a.baseColor,"15"):"".concat(a.baseColor,"08"),border:"1px solid ".concat(a.baseColor,"20")},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(M.M,{mode:"wait",children:s?(0,n.jsx)(Y.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.4,ease:[.34,1.56,.64,1]},children:(0,n.jsx)(es.Z,{size:14,className:"shrink-0",style:{color:a.baseColor}})},"check"):(0,n.jsxs)(Y.E.div,{className:"relative flex h-3.5 w-3.5 items-center justify-center",children:[(0,n.jsx)(Y.E.div,{className:"absolute inset-0 rounded-full border-2 border-transparent",style:{borderTopColor:a.baseColor,borderRightColor:"".concat(a.baseColor,"60")},animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),(0,n.jsx)(Y.E.div,{className:"h-1.5 w-1.5 rounded-full",style:{backgroundColor:a.baseColor},animate:{scale:[1,1.3,1],opacity:[.8,1,.8]},transition:{duration:1.2,repeat:1/0,ease:"easeInOut"}})]},"loader")}),(0,n.jsx)(Y.E.span,{className:"text-xs font-medium",style:{color:s?a.baseColor:"".concat(a.baseColor,"CC")},animate:s?{}:{opacity:[.7,1,.7]},transition:s?{}:{duration:2,repeat:1/0,ease:"easeInOut"},children:i})]})})}let e5=["delegate_task_to_sub_agent","create_canvas","update_canvas","read_canvas","generate_flashcards","generate_mindmap","pexels_image_search","pexels_video_search","execute_python","manage_task_plan"],e4=[/^MINDPAL_WORKFLOW_/];function e6(e){let{toolInvocation:t,showAgentData:a,showToolCalls:s,showKnowledgeSourceContext:i}=e;if(!t.input)return null;let l=t.toolName,r=e5.includes(l)||e4.some(e=>e.test(l));if(!s&&!r)return(0,n.jsx)(e3,{toolInvocation:t});if("delegate_task_to_sub_agent"===l)return(0,n.jsx)(el,{tool:t,showAgentData:a,showToolCalls:s,showKnowledgeSourceContext:i},t.toolCallId);if(l.startsWith("INTEGRATION_COMPOSIO_"))return(0,n.jsx)(eh,{toolInvocation:t},t.toolCallId);if(null==l?void 0:l.startsWith("MINDPAL_WORKFLOW_"))return(0,n.jsx)(e1,{toolInvocation:t},t.toolCallId);if("manage_task_plan"===l)return(0,n.jsx)(eH,{toolInvocation:t},t.toolCallId);switch(l){case"get_context_from_provided_knowledge_sources_and_notes":if(!i)return null;return(0,n.jsx)(ec,{toolInvocation:t},t.toolCallId);case"web_search_1dfrse3e":return(0,n.jsx)(eu,{toolInvocation:t},t.toolCallId);case"generate_flashcards":return(0,n.jsx)(eN,{toolInvocation:t},t.toolCallId);case"generate_mindmap":return(0,n.jsx)(eA,{toolInvocation:t},t.toolCallId);case"generate_image_with_recraft":case"generate_image_with_dalle":case"nano_banana_image_generation":case"generate_image_with_flux":return(0,n.jsx)(eX,{toolInvocation:t},t.toolCallId);case"pexels_image_search":return(0,n.jsx)(e_,{toolInvocation:t},t.toolCallId);case"pexels_video_search":return(0,n.jsx)(eP,{toolInvocation:t},t.toolCallId);case"execute_python":return(0,n.jsx)(ef,{toolInvocation:t},t.toolCallId);case"read_canvas":case"create_canvas":case"update_canvas":return(0,n.jsx)(eB,{toolInvocation:t},t.toolCallId);default:return(0,n.jsx)(ep,{toolInvocation:t},t.toolCallId)}}function e8(e){let{isLoading:t,reasoningText:a}=e,[s,i]=(0,I.useState)(!0);return(0,n.jsxs)("div",{className:"flex flex-col",children:[t?(0,n.jsxs)("div",{className:"flex items-center gap-2 text-default-500",children:[(0,n.jsx)(et.Z,{size:14,className:"animate-spin"}),(0,n.jsx)("p",{className:"text-sm",children:"Reasoning..."})]}):(0,n.jsxs)("button",{onClick:()=>i(!s),className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:["Reasoned for a few seconds",(0,n.jsx)($.Z,{size:14,className:"transition-transform duration-200 ".concat(s?"rotate-180":"")})]}),(0,n.jsx)(M.M,{initial:!1,children:s&&(0,n.jsx)(Y.E.div,{"data-testid":"message-reasoning",initial:"collapsed",animate:"expanded",exit:"collapsed",variants:{collapsed:{height:0,opacity:0,marginTop:0,marginBottom:0},expanded:{height:"auto",opacity:1,marginTop:"1rem",marginBottom:"0.5rem"}},transition:{duration:.2,ease:"easeInOut"},style:{overflow:"hidden"},className:"flex flex-col gap-4 border-l-2 border-default-200 pl-4",children:(0,n.jsx)(W,{text:a})},"content")})]})}function e9(e){let{filePart:t}=e,[a,s]=(0,I.useState)(null),[i,l]=(0,I.useState)(!1),[r,o]=(0,I.useState)(null);return((0,I.useEffect)(()=>{(async()=>{let e=t.url;if(!e){o("No URL provided");return}if(e.startsWith("data:")||e.startsWith("http://")||e.startsWith("https://")){s(e);return}l(!0);try{let t=await D({s3FilePath:e});s(t.url)}catch(e){console.error("Error fetching document URL:",e),o("Failed to load image")}finally{l(!1)}})()},[t.url]),r)?(0,n.jsx)(K.w,{className:"w-full max-w-md",children:(0,n.jsx)(ey.G,{children:(0,n.jsx)("p",{className:"text-sm text-danger",children:r})})}):i||!a?(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsx)(w.X,{className:"h-64 w-full rounded-lg"})}):(t.mediaType||"image/png").startsWith("image/")?(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsx)("img",{src:a,alt:t.filename||"Generated image",className:"h-auto w-full rounded-lg object-contain"})}):(0,n.jsx)(K.w,{className:"w-full max-w-md",children:(0,n.jsx)(ey.G,{children:(0,n.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:t.filename||"Download file"})})})}function e7(e){let{agentData:t,isLoading:a,messages:s,error:i,messageContainerClassNames:r="ml-10",onMessagesChange:o,isUpdatingMessages:d,onRegenerate:c,isRegenerationPromptSupported:u=!1,hideActions:m=!1,messageActionsPlacement:p="bottom",hideAgentChip:f=!1,contentToggleLabel:x,showContentToggle:h=!1,showAgentData:v=!0,showToolCalls:y=!0,showKnowledgeSourceContext:w=!0,onContinue:N}=e,[j,C]=(0,I.useState)(!0),{isSuccessful:S,copyToClipboard:k,canCopyToClipboard:P}=A(),R=(0,I.useMemo)(()=>{let e=s.filter(e=>"assistant"===e.role);if(0===e.length)return"";let t=e[e.length-1];return t?t.parts.map(e=>(null==e?void 0:e.type)==="text"||(null==e?void 0:e.type)==="reasoning"?e.text:"").filter(Boolean).join("\n\n"):""},[s]),T=s.some(e=>"assistant"===e.role);return(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[h&&(0,n.jsxs)("button",{onClick:()=>C(!j),className:"flex w-full flex-row items-center gap-2 text-xs font-normal text-default-500",children:[x||(j?"Hide content":"Show content"),(0,n.jsx)($.Z,{size:14,className:"transition-transform duration-200 ".concat(j?"rotate-180":"")})]}),i&&(0,n.jsx)(J.N,{color:"warning",title:"Something went wrong. Please try again.",description:"message"in i&&"string"==typeof i.message?i.message:"An error occurred while generating the agent response.",endContent:(0,n.jsx)("div",{className:"flex h-full flex-col justify-center gap-2",children:(0,n.jsx)(g.A,{onPress:()=>{c?c():window.location.reload()},isLoading:a,variant:"flat",size:"sm",color:"warning",startContent:(0,n.jsx)(H.Z,{size:16}),children:"Retry"})})}),c&&!a&&!i&&!T&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(J.N,{color:"warning",title:"No response received",description:"The agent didn't generate any content. This is likely a model's error. Try regenerating for a proper response.",endContent:(0,n.jsx)("div",{className:"flex h-full flex-col justify-center gap-2",children:(0,n.jsx)(g.A,{onPress:()=>c(),isLoading:a,variant:"flat",size:"sm",color:"warning",startContent:(0,n.jsx)(H.Z,{size:16}),children:"Regenerate"})})})}),(0,n.jsx)(M.M,{children:j&&(0,n.jsxs)(Y.E.div,{className:(0,b.cn)(r,"flex flex-col gap-2"),initial:{opacity:0,height:0,y:-20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-20},transition:{duration:.2,ease:"easeOut"},children:[s.reduce((e,t,a)=>{if("assistant"===t.role){var i;(a===s.length-1||(null===(i=s[a+1])||void 0===i?void 0:i.role)==="assistant")&&e.push(t)}return e},[]).map(e=>{var t;return(0,n.jsx)("div",{className:"flex flex-col gap-4",children:null===(t=e.parts)||void 0===t?void 0:t.map((t,s)=>{let i="message-".concat(e.id,"-part-").concat(s);return"text"===t.type?(0,n.jsx)(ee,{text:t.text},i):"reasoning"===t.type?(0,n.jsx)(e8,{reasoningText:t.text,isLoading:a},i):"file"===t.type?(0,n.jsx)(e9,{filePart:t},i):"dynamic-tool"===t.type?(0,n.jsx)(e6,{toolInvocation:t,showAgentData:v,showToolCalls:y,showKnowledgeSourceContext:w},i):t.type.startsWith("tool-")&&(0,l.ZH)(t)?(0,n.jsx)(e6,{toolInvocation:{...t,type:"dynamic-tool",toolName:t.type.replace("tool-","")},showAgentData:v,showToolCalls:y,showKnowledgeSourceContext:w},i):void 0})},e.id)}),!m&&"bottom"===p&&""!==R.trim()&&P&&(0,n.jsx)("div",{className:"mt-1 flex w-full flex-row gap-2",children:(0,n.jsxs)(g.A,{size:"sm",variant:"light",className:"h-7 w-7 rounded-full text-default-500",onPress:()=>{R&&k(R)},isIconOnly:!0,children:[S?(0,n.jsx)(E.Z,{size:14}):(0,n.jsx)(_.Z,{size:14}),(0,n.jsx)("span",{className:"sr-only",children:"Copy"})]})})]})})]})}var te=a(76980),tt=a(32489),ta=a(63639);function ts(e){let{files:t,processingFiles:a=[],onDelete:s,isDisabled:i=!1}=e;return(0,n.jsxs)(eS.o,{className:"flex flex-row gap-2 overflow-hidden overflow-x-auto",orientation:"horizontal",children:[t.map((e,t)=>(0,n.jsxs)("div",{className:"relative overflow-visible",children:[(0,n.jsxs)("div",{className:"group relative flex h-14 w-auto min-w-[10rem] max-w-[16rem] flex-row items-center gap-3 overflow-hidden rounded-lg bg-default-100 p-3",children:[(0,n.jsx)("div",{className:"flex flex-shrink-0 items-center justify-center",children:(0,n.jsx)(te.Z,{className:"h-5 w-5 text-default-400"})}),(0,n.jsx)("div",{className:"flex min-w-0 flex-col",children:(0,n.jsx)("div",{className:"truncate text-sm font-medium",children:e.title})})]}),!i&&s&&(0,n.jsx)("span",{className:"absolute -right-1 -top-1 z-10 cursor-pointer rounded-full bg-white p-1 text-danger shadow-lg hover:bg-danger hover:text-white",onClick:()=>s(t),children:(0,n.jsx)(tt.Z,{className:"h-3 w-3"})})]},t)),a.map((e,t)=>(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:"group relative flex h-14 w-auto min-w-[10rem] max-w-[16rem] flex-row items-center gap-3 overflow-hidden rounded-lg bg-default-100 p-3",children:[(0,n.jsxs)("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-default/40",children:["processing"===e.status&&(0,n.jsx)(et.Z,{className:"h-4 w-4 animate-spin text-primary"}),"success"===e.status&&(0,n.jsx)(E.Z,{className:"h-4 w-4 text-success"}),"error"===e.status&&(0,n.jsx)(ta.Z,{className:"h-4 w-4 text-warning"})]}),(0,n.jsx)("div",{className:"flex flex-shrink-0 items-center justify-center",children:(0,n.jsx)(te.Z,{className:"h-5 w-5 text-default-400"})}),(0,n.jsx)("div",{className:"flex min-w-0 flex-col",children:(0,n.jsx)("div",{className:"truncate text-sm font-medium",children:e.name})})]})},"processing-".concat(t)))]})}var ti=a(62056);function tn(e){let{images:t,processingImages:a=[],onDelete:s,isDisabled:i=!1}=e;return(0,n.jsxs)(eS.o,{className:"flex flex-row gap-2 overflow-hidden overflow-x-auto",orientation:"horizontal",children:[t.map((e,t)=>{var a;return(0,n.jsxs)("div",{className:"relative overflow-visible",children:[(0,n.jsxs)("div",{className:"group relative flex h-20 w-20 items-center justify-center overflow-hidden rounded-lg bg-default-100",children:[e.url&&(0,n.jsx)(ti.J,{src:e.url,alt:(null===(a=e.s3FilePath)||void 0===a?void 0:a.split("/").pop())||"Uploaded image",classNames:{wrapper:"w-full h-full z-0",img:"w-full h-full object-cover"},radius:"none"}),!e.url&&(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center text-default-400",children:(0,n.jsx)(ta.Z,{className:"h-5 w-5"})})]}),!i&&s&&(0,n.jsx)("span",{className:"absolute -right-1 -top-1 z-10 cursor-pointer rounded-full bg-white p-1 text-danger shadow-lg hover:bg-danger hover:text-white",onClick:()=>s(t),children:(0,n.jsx)(tt.Z,{className:"h-3 w-3"})})]},t)}),a.map((e,t)=>(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:"group relative flex h-20 w-20 items-center justify-center overflow-hidden rounded-lg bg-default-100",children:[(0,n.jsxs)("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-default/40",children:["processing"===e.status&&(0,n.jsx)(et.Z,{className:"h-4 w-4 animate-spin text-primary"}),"success"===e.status&&(0,n.jsx)(E.Z,{className:"h-4 w-4 text-success"}),"error"===e.status&&(0,n.jsx)(ta.Z,{className:"h-4 w-4 text-warning"})]}),(0,n.jsx)(ti.J,{src:e.previewUrl,alt:e.file.name,classNames:{wrapper:"w-full h-full z-0",img:"w-full h-full object-cover"},radius:"none"})]})},"processing-".concat(t)))]})}function tl(e){var t,a;let{message:s}=e,i=(null===(t=s.metadata)||void 0===t?void 0:t.files)?s.metadata.files:[];return(0,n.jsxs)("div",{className:"flex w-full flex-col items-end gap-4",children:[(null===(a=s.metadata)||void 0===a?void 0:a.images)&&s.metadata.images.length>0&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(tn,{images:s.metadata.images})}),i.length>0&&(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(ts,{files:i,isDisabled:!0})}),(0,n.jsx)(W,{text:s.parts.filter(e=>"text"===e.type).map(e=>e.text).join("\n"),className:"text-default-800"})]})}let tr=e=>{let{accentColors:t,chatbotData:a}=(0,v.X)(),{displayUrl:s,isLoading:i}=X(a.avatarUrl);return(0,n.jsx)("div",{className:"group/message mx-auto w-full max-w-screen-md px-6",children:(0,n.jsxs)("div",{className:(0,b.cn)("group relative flex items-start",{"justify-end":"user"===e.message.role}),children:["assistant"===e.message.role&&(0,n.jsx)("div",{className:"flex flex-col items-center gap-0",children:(0,n.jsx)("div",{className:(0,b.cn)("z-0 flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-full","bg-primary-100 text-primary-500"),style:{color:t.baseColor,backgroundColor:"".concat(t.baseColor,"33")},children:i?(0,n.jsx)(c.c,{size:"sm"}):s?(0,n.jsx)(u.h,{size:"sm",src:s,className:"h-8 w-8"}):(0,n.jsx)(Z.Z,{size:16})})}),(0,n.jsx)("div",{className:(0,b.cn)("flex flex-col gap-4 overflow-hidden px-1",{"ml-4 w-full":"assistant"===e.message.role,"w-auto max-w-[32rem]":"user"===e.message.role}),children:"assistant"===e.message.role?(0,n.jsx)(e7,{isLoading:e.isLoading,messageContainerClassNames:"ml-0",messageActionsPlacement:"bottom",hideActions:e.shouldHideActions,hideAgentChip:e.shouldHideAgentChip,messages:[e.message],showToolCalls:!1}):(0,n.jsx)(K.w,{className:"flex flex-shrink-0 flex-row items-center gap-2 rounded-xl px-4 py-3 shadow-none",style:{backgroundColor:"".concat(t.baseColor,"1A")},children:(0,n.jsx)(tl,{message:e.message})})})]})})};function to(e){let{status:t="thinking"}=e,{accentColors:a,chatbotData:s}=(0,v.X)();return(0,n.jsx)("div",{className:"group/message mx-auto w-full max-w-screen-md px-6",children:(0,n.jsxs)("div",{className:"group relative flex items-start gap-4",children:[(0,n.jsx)("div",{className:"flex flex-col items-center gap-0",children:(0,n.jsx)("div",{className:"z-0 flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-full shadow-sm ring-1 ring-black/5",style:{color:a.baseColor,backgroundColor:"".concat(a.baseColor,"15")},children:s.avatarUrl?(0,n.jsx)(u.h,{size:"sm",src:s.avatarUrl,className:"h-8 w-8"}):(0,n.jsx)(Z.Z,{size:16})})}),(0,n.jsxs)("div",{className:"flex-1 space-y-3 pt-0.5",children:[(0,n.jsxs)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.2},className:"flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"text-sm",style:{color:a.baseColor},children:{preparing:{text:"Getting ready"},thinking:{text:"Thinking"},generating:{text:"Working on it"}}[t].text}),(0,n.jsx)("div",{className:"flex items-center gap-0.5",children:Array.from({length:3},(e,t)=>(0,n.jsx)(Y.E.div,{initial:{opacity:.3},animate:{opacity:[.3,1,.3]},transition:{duration:1.4,repeat:1/0,delay:.2*t,ease:"easeInOut"},className:"h-1 w-1 rounded-full",style:{backgroundColor:a.baseColor}},t))})]}),(0,n.jsx)(Y.E.div,{initial:{opacity:0,scaleX:0},animate:{opacity:[.4,.7,.4],scaleX:[.3,.95,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"h-3 rounded-full origin-left",style:{backgroundColor:"".concat(a.baseColor,"20")}})]})]})})}function td(e){var t;let{isLoading:a,messages:s,error:i,handleReload:l,isReadonly:r,forceUpdate:o}=e,{accentColors:d}=(0,v.X)(),c=s[s.length-1],u=(null==c?void 0:c.role)==="assistant"&&Array.isArray(c.parts)&&c.parts.length>0,m=!!(a&&!u),p=function(e,t){let[a,s]=(0,I.useState)("preparing"),i=(0,I.useRef)(),n=(0,I.useRef)();return(0,I.useEffect)(()=>(e&&!t?(s("preparing"),i.current=setTimeout(()=>{s("thinking"),n.current=setTimeout(()=>{s("generating")},800)},400)):(i.current&&clearTimeout(i.current),n.current&&clearTimeout(n.current),s("preparing")),()=>{i.current&&clearTimeout(i.current),n.current&&clearTimeout(n.current)}),[e,t]),a}(a||!1,u),f=(null==c?void 0:c.role)==="assistant"&&Array.isArray(c.parts)&&1===c.parts.length&&(null===(t=c.parts[0])||void 0===t?void 0:t.type)==="step-start";return(0,n.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-4 pt-12",children:[s.map((e,t)=>{let i="assistant"===e.role&&0===t;return t!==s.length-1||"assistant"!==e.role||Array.isArray(e.parts)&&0!==e.parts.length?(0,n.jsx)(tr,{message:e,isLoading:!!a&&s.length-1===t,shouldHideActions:i,isReadonly:r,forceUpdate:o},e.id):null}),i&&(0,n.jsx)("div",{className:"mx-auto w-full max-w-3xl px-4",children:(0,n.jsx)(J.N,{color:"warning",title:"Something went wrong. Please try again.",description:"message"in i&&"string"==typeof i.message?i.message:"An error occurred while generating the agent response.",endContent:l&&(0,n.jsx)("div",{className:"flex h-full flex-col justify-center gap-2",children:(0,n.jsx)(g.A,{onPress:()=>{null==l||l(s)},isLoading:a,variant:"flat",size:"sm",color:"warning",startContent:(0,n.jsx)(H.Z,{size:16}),children:"Retry"})})})}),(0,n.jsx)(M.M,{mode:"wait",children:m&&(0,n.jsx)(to,{status:p},"skeleton")}),f&&!a&&l&&(0,n.jsx)("div",{className:"mx-auto w-full max-w-3xl px-4",children:(0,n.jsx)("div",{className:"flex items-center justify-center gap-3 rounded-lg border border-dashed border-default-300 bg-default-50 p-6",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("p",{className:"text-sm text-default-600",children:"Something interrupted our chat. Retry?"}),(0,n.jsx)(g.A,{onPress:()=>{l(s)},isLoading:a,variant:"flat",size:"sm",color:"primary",startContent:(0,n.jsx)(H.Z,{size:16}),style:{backgroundColor:d.baseColor,color:"white"},children:"Regenerate"})]})})})]})}var tc=a(67028),tu=a(44743),tm=a(83464),tp=a(48662),tf=a(3667),tx=a(54010),th=a.n(tx),tg=(0,U.$)("d565a789e5d12bc98acf3bcc06467bae8eda7f37");function tv(e){let{onTranscriptAvailable:t}=e,{accentColors:a}=(0,v.X)(),[s,i]=(0,I.useState)(!1),l=(0,I.useRef)(null),{status:r,error:o,startRecording:d,stopRecording:c,mediaBlobUrl:u,clearBlobUrl:m}=(0,tf.useReactMediaRecorder)({video:!1,audio:!0,stopStreamsOnStop:!0}),p=async e=>{i(!0);try{let a=async e=>(await (0,tm.Z)({url:e,method:"GET",responseType:"blob"})).data,s=await a(e);try{l.current=await th()(s)}catch(e){console.warn("WebM repair failed, using original blob:",e),l.current=s}let i=new File([l.current],"recorded.webm",{type:s.type,lastModified:new Date().getTime()}),n=new FormData;n.append("document_file",i);let r=await tg({formData:n,openAiApiKey:""});r&&t(r)}catch(e){console.error(e),eb.Am.warning("Failed to transcribe audio: ".concat(e instanceof Error?e.message:"Unknown error",". Please try again."))}finally{m(),i(!1)}};return(0,I.useEffect)(()=>{"stopped"==r&&u&&p(u)},[r,u]),(0,n.jsx)("button",{onClick:()=>{"idle"==r||"stopped"==r?d():"recording"==r&&c()},disabled:!!o,className:"".concat("recording"===r?"text-red-500":""," duration-150 hover:opacity-50"),style:{borderColor:a.baseColor,color:"recording"===r?void 0:a.baseColor},children:"recording"===r?(0,n.jsxs)("span",{className:"relative flex h-4 w-4",children:[(0,n.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"}),(0,n.jsx)("span",{className:"relative inline-flex h-4 w-4 rounded-full bg-red-500"})]}):s?(0,n.jsx)(et.Z,{size:16,className:"animate-spin"}):(0,n.jsx)(tp.Z,{size:16})})}var ty=a(74860),tw=a(17580);function tb(){let{accentColors:e,chatbotData:t}=(0,v.X)(),a=t.workspaceAffiliateCode,s=a?"".concat(ty.p,"?aff=").concat(encodeURIComponent(a)):ty.p;return(0,n.jsxs)("p",{onClick:()=>window.open(s,"_blank"),className:"flex cursor-pointer items-center gap-1.5 text-sm text-default-500 duration-150 hover:opacity-70",children:["Powered by"," ",(0,n.jsxs)("span",{className:"flex items-center gap-1",style:{color:e.baseColor},children:["MindPal"," ",(0,n.jsx)("span",{children:(0,n.jsx)(tw.Z,{size:16})})]})]})}var tN=a(5907),tj=a(40257);let tI=tN.z.object({NODE_ENV:tN.z.enum(["development","test","production"]),DATABASE_URL:tN.z.string().url(),OPENAI_API_KEY:tN.z.string(),ANTHROPIC_API_KEY:tN.z.string(),GOOGLE_GENAI_API_KEY:tN.z.string(),GOOGLE_GENAI_API_KEY_2:tN.z.string(),AWS_ACCESS_KEY_ID:tN.z.string(),AWS_SECRET_ACCESS_KEY:tN.z.string(),AWS_REGION:tN.z.string(),TOGETHER_AI_API_KEY:tN.z.string(),CLERK_SECRET_KEY:tN.z.string(),LEMONSQUEEZY_API_KEY:tN.z.string(),REDIS_URL:tN.z.string().url(),REDIS_PASSWORD:tN.z.string(),COMPOSIO_API_KEY:tN.z.string(),DAYTONA_API_KEY:tN.z.string(),E2B_API_KEY:tN.z.string(),GOOGLE_VERTEX_PROJECT:tN.z.string(),GOOGLE_VERTEX_LOCATION:tN.z.string(),GOOGLE_CLIENT_EMAIL:tN.z.string(),GOOGLE_PRIVATE_KEY:tN.z.string()}),tC=tN.z.object({NEXT_PUBLIC_MINDPAL_API_ENDPOINT:tN.z.string().url(),NEXT_PUBLIC_MINDPAL_API_ENDPOINTS_OLD:tN.z.string().refine(e=>{try{return e.split(",").every(e=>!e.includes(" ")&&e.startsWith("http")&&new URL(e))}catch(e){return!1}},{message:"Must be a comma-separated list of valid URLs starting with http/https"}),NEXT_PUBLIC_APP_URL:tN.z.string().url(),NEXT_PUBLIC_WORKFLOW_VIEWER_URL:tN.z.string().url()}),tA={NODE_ENV:"production",DATABASE_URL:tj.env.DATABASE_URL,OPENAI_API_KEY:tj.env.OPENAI_API_KEY,ANTHROPIC_API_KEY:tj.env.ANTHROPIC_API_KEY,GOOGLE_GENAI_API_KEY:tj.env.GOOGLE_GENAI_API_KEY,GOOGLE_GENAI_API_KEY_2:tj.env.GOOGLE_GENAI_API_KEY_2,AWS_ACCESS_KEY_ID:tj.env.AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY:tj.env.AWS_SECRET_ACCESS_KEY,AWS_REGION:tj.env.AWS_REGION,TOGETHER_AI_API_KEY:tj.env.TOGETHER_AI_API_KEY,CLERK_SECRET_KEY:tj.env.CLERK_SECRET_KEY,LEMONSQUEEZY_API_KEY:tj.env.LEMONSQUEEZY_API_KEY,NEXT_PUBLIC_MINDPAL_API_ENDPOINT:"https://mindpal-backend-v2-chatbot-1056135660705.us-south1.run.app",NEXT_PUBLIC_MINDPAL_API_ENDPOINTS_OLD:"https://mindpal-backend-v2-chatbot-1056135660705.us-south1.run.app,https://mindpal-backend-v2-1056135660705.us-east1.run.app,https://dxx6nypdpu.eu-central-1.awsapprunner.com,https://e8putxzt2m.us-west-2.awsapprunner.com",REDIS_URL:tj.env.REDIS_URL,REDIS_PASSWORD:tj.env.REDIS_PASSWORD,COMPOSIO_API_KEY:tj.env.COMPOSIO_API_KEY,DAYTONA_API_KEY:tj.env.DAYTONA_API_KEY,E2B_API_KEY:tj.env.E2B_API_KEY,GOOGLE_VERTEX_PROJECT:tj.env.GOOGLE_VERTEX_PROJECT,GOOGLE_VERTEX_LOCATION:tj.env.GOOGLE_VERTEX_LOCATION,GOOGLE_CLIENT_EMAIL:tj.env.GOOGLE_CLIENT_EMAIL,GOOGLE_PRIVATE_KEY:tj.env.GOOGLE_PRIVATE_KEY,NEXT_PUBLIC_APP_URL:"https://app.mindpal.space",NEXT_PUBLIC_WORKFLOW_VIEWER_URL:"https://workflow.getmindpal.com"};tI.merge(tC);let tS=tj.env;if(!1==!!tj.env.SKIP_ENV_VALIDATION){let e=tC.safeParse(tA);if(!1===e.success)throw console.error(" Invalid environment variables:",e.error.flatten().fieldErrors),Error("Invalid environment variables");tS=new Proxy(e.data,{get(e,t){if("string"==typeof t){if(!t.startsWith("NEXT_PUBLIC_"))throw Error(" Attempted to access a server-side environment variable on the client");return e[t]}}})}async function tE(e){let t,{customApiEndpoints:a,apiPath:s,options:i,timeout:n=1e4}=e;t=a?a.map(e=>e+s):[tS.NEXT_PUBLIC_MINDPAL_API_ENDPOINT+s];let l=null;for(let e of t){let t=new AbortController,a=setTimeout(()=>t.abort(),n);try{let s=await fetch(e,{...i,signal:t.signal});if(clearTimeout(a),!s.ok)throw console.error("API request failed for ".concat(e,":"),s,i),Error("API request failed for ".concat(e,": ").concat(s.statusText));return await s.json()}catch(t){console.error("API request failed for ".concat(e,":"),t,i),l=t;continue}}throw Error("Failed to fetch data from all provided URLs. Last error: ".concat((null==l?void 0:l.message)||"Unknown error"))}let t_=async e=>{let t={method:"POST",headers:{accept:"application/json"},body:e.formData};try{return(await tE({apiPath:"/api/document/upload-image",options:t})).images.map(e=>({s3FilePath:e.s3_file_path||void 0,url:e.url}))}catch(e){throw console.error(e),Error("Something went wrong while MindPal was processing the file(s). Please try again.")}},tk=async e=>{let t=new URLSearchParams({openai_api_key:"none"}),a=new FormData;e.files.forEach(e=>{a.append("document_files",e)});let s="/api/workflow-document/upload-file?".concat(t.toString());try{var i;return(await tE({customApiEndpoints:null===(i=tS.NEXT_PUBLIC_MINDPAL_API_ENDPOINTS_OLD)||void 0===i?void 0:i.split(","),apiPath:s,options:{method:"POST",headers:{accept:"application/json"},body:a}})).documents.map(e=>({title:e.title,s3FilePath:e.s3_file_path,documentId:e.document_id,size:e.size}))}catch(e){throw console.error(e),Error("Something went wrong while MindPal was processing the file(s). Please try again.")}};function tP(e){let{accentColors:t}=(0,v.X)(),a=(0,I.useRef)(null);return(0,n.jsxs)("button",{onClick:()=>{a.current&&a.current.click()},className:"duration-150 hover:opacity-50",style:{borderColor:t.baseColor,color:t.baseColor},children:[(0,n.jsx)("input",{ref:a,type:"file",id:"fileInput",className:"hidden",multiple:!0,onChange:t=>{let a=t.target.files;a&&Array.from(a).length>0&&e.handleFileUpload(a)}}),e.isProcessing?(0,n.jsx)(et.Z,{size:16,className:"animate-spin"}):(0,n.jsx)(te.Z,{size:16})]})}function tR(e){let{chatbotData:t,accentColors:a}=(0,v.X)(),{processingImages:s,handleImageUpload:i,canAddMoreImages:l,isProcessing:r}=function(e){let{images:t,setImages:a,maxImageCount:s=1/0}=e,[i,n]=(0,I.useState)([]),[l,r]=(0,I.useState)(!1),o=async e=>{let l=Array.from(e),o=await Promise.all(l.map(e=>({file:e,status:"processing",previewUrl:URL.createObjectURL(e)})));if(t.length+i.length+l.length>s){eb.Am.warning("Maximum ".concat(s," images allowed")),o.forEach(e=>URL.revokeObjectURL(e.previewUrl));return}n(e=>[...e,...o]),r(!0);let d=new FormData;l.forEach(e=>{d.append("document_files",e)});try{let e=await t_({formData:d});a(t=>[...t,...e]),n(e=>{let t=e.filter(e=>!l.some(t=>t.name===e.file.name));return o.forEach(e=>URL.revokeObjectURL(e.previewUrl)),t})}catch(e){n(e=>e.map(e=>l.some(t=>t.name===e.file.name)?{...e,status:"error"}:e)),eb.Am.warning("Failed to upload some images. Please try again.")}finally{r(!1)}},d=t.length+i.length<s;return{processingImages:i,setProcessingImages:n,handleImageUpload:o,canAddMoreImages:d,isProcessing:l}}({images:e.images,setImages:e.setImages,maxImageCount:10}),{processingFiles:o,handleFileUpload:d,canAddMoreFiles:c,isProcessing:u}=function(e){let{files:t,setFiles:a,maxFileCount:s=1/0,maxFileSize:i=52428800}=e,[n,l]=(0,I.useState)([]),[r,o]=(0,I.useState)(!1),d=async e=>{let r=Array.from(e),d=r.filter(e=>e.size>i);if(d.length>0&&(eb.Am.warning("Files exceeding size limit (50MB): ".concat(d.map(e=>e.name).join(", "))),0===r.filter(e=>e.size<=i).length))return;let c=r.filter(e=>e.size<=i).map(e=>({file:e,status:"processing",name:e.name,size:e.size}));if(t.length+n.length+c.length>s){eb.Am.warning("Maximum ".concat(s," files allowed"));return}l(e=>[...e,...c]),o(!0);try{let e=await tk({files:c.map(e=>e.file)});a(t=>[...t,...e]),l(e=>e.filter(e=>!c.some(t=>t.file.name===e.file.name)))}catch(e){l(e=>e.map(e=>c.some(t=>t.file.name===e.file.name)?{...e,status:"error"}:e)),eb.Am.warning("Failed to upload some files. Please try again.")}finally{o(!1)}},c=t.length+n.length<s;return{processingFiles:n,setProcessingFiles:l,handleFileUpload:d,canAddMoreFiles:c,isProcessing:r}}({files:e.files,setFiles:e.setFiles,maxFileCount:5,maxFileSize:52428800}),[m,p]=(0,I.useState)(!1),f=t=>{let a=Array.from(t);if(0===a.length)return;let s=a.filter(e=>e.type.startsWith("image/")),n=a.filter(e=>!e.type.startsWith("image/"));if(s.length>0&&e.isImageInputSupported&&l){let e=new DataTransfer;s.forEach(t=>{e.items.add(t)}),i(e.files)}if(n.length>0&&c){let e=new DataTransfer;n.forEach(t=>{e.items.add(t)}),d(e.files)}};return(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault()},className:"sticky bottom-6 flex flex-col gap-3",children:(0,n.jsxs)("div",{className:"relative mx-auto flex h-full w-full max-w-screen-md flex-col gap-4 rounded-2xl border-2 bg-white p-3 ".concat(e.isDisabled?"border-gray-300 opacity-50":"border-primary shadow-lg shadow-primary/20 ".concat(m?"border-dashed":"")),style:e.isDisabled?{}:{borderColor:a.baseColor,boxShadow:"0 5px 10px ".concat(a.baseColor,"33"),backgroundColor:m?"#fafafa":void 0},onDragOver:t=>{t.preventDefault(),e.isDisabled||(p(!0),t.dataTransfer.dropEffect="copy")},onDragEnter:t=>{t.preventDefault(),e.isDisabled||p(!0)},onDragLeave:e=>{e.preventDefault(),p(!1)},onDrop:t=>{var a;if(t.preventDefault(),p(!1),e.isDisabled)return;let s=null===(a=t.dataTransfer)||void 0===a?void 0:a.files;s&&0!==s.length&&f(s)},children:[e.isDisabled?(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2 py-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:a.baseColor},children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,n.jsx)("p",{className:"text-center text-base font-medium text-gray-700",children:"Please fill in the information form above to start chatting"})]}),(0,n.jsx)("p",{className:"text-center text-xs text-gray-500",children:"We need this information to provide you with the best experience"})]}):(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[e.images.length>0&&(0,n.jsx)(tn,{images:e.images,processingImages:s,onDelete:t=>{e.setImages(e.images.filter((e,a)=>a!==t))}},e.images.length),e.files.length>0&&(0,n.jsx)(ts,{files:e.files,processingFiles:o,onDelete:t=>{e.setFiles(e.files.filter((e,a)=>a!==t))}},e.files.length),(0,n.jsx)("div",{className:"flex flex-col gap-3",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center gap-3",children:[(0,n.jsx)(tc.Y,{rows:1,minRows:1,autoFocus:!0,className:"flex-1",classNames:{input:"!focus-invisible:outline-none focus:ring-0 focus:border-transparent focus:outline-none"},isDisabled:e.isDisabled||e.isLoading,onKeyDown:t=>{"Enter"!==t.key||t.shiftKey||e.isDisabled||e.isLoading||(t.preventDefault(),e.handleSubmitUserMessage({value:e.input,images:e.images,files:e.files}))},onPaste:t=>{var a;if(!e.isImageInputSupported)return;let s=null===(a=t.clipboardData)||void 0===a?void 0:a.files;if(!s)return;let n=Array.from(s).filter(e=>e.type.startsWith("image/"));if(n.length>0&&l){let e=new DataTransfer;n.forEach(t=>{e.items.add(t)}),i(e.files)}},placeholder:t.uxWritingConfig&&t.uxWritingConfig.CHAT_PLACEHOLDER||"Ask anything...",value:e.input,onChange:t=>e.setInput(t.target.value),startContent:e.isLoading||e.isDisabled?void 0:(0,n.jsxs)("div",{className:"mr-1 mt-0.5 flex flex-row items-center gap-2",children:[(0,n.jsx)(tv,{onTranscriptAvailable:t=>e.setInput(t)}),c&&(0,n.jsx)(tP,{isProcessing:u||r,setFiles:e.setFiles,handleFileUpload:t=>{let a=Array.from(t),s=a.filter(e=>e.type.startsWith("image/")),n=a.filter(e=>!e.type.startsWith("image/"));if(s.length>0&&e.isImageInputSupported&&l){let e=new DataTransfer;s.forEach(t=>{e.items.add(t)}),i(e.files)}if(n.length>0){let e=new DataTransfer;n.forEach(t=>{e.items.add(t)}),d(e.files)}}})]})}),(0,n.jsx)(g.A,{type:"submit",onClick:()=>{e.isDisabled||e.handleSubmitUserMessage({value:e.input,images:e.images,files:e.files})},isDisabled:""===e.input||e.isDisabled||e.isLoading,isLoading:e.isLoading,variant:"solid",color:"primary",isIconOnly:!0,style:{backgroundColor:a.baseColor},children:(0,n.jsx)(tu.Z,{size:16})})]})})]}),!t.isMpBrandingOff&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(tb,{})})]})})}var tT=a(98540),tO=a(68825),tU=a(68442);function tD(e){let{setUserClickClose:t,userInfoForm:a,userInfoFormData:s,setUserInfoFormData:l,submitStatus:r,handleSubmitUserInfo:o,isRequired:d}=e,{accentColors:c,chatbotData:u}=(0,v.X)();return(0,I.useEffect)(()=>{if(2===r){let e=setTimeout(()=>{t(!0)},3e3);return()=>clearTimeout(e)}},[r,t]),(0,n.jsx)(M.M,{children:(0,n.jsx)(Y.E.div,{className:"mx-auto w-full max-w-screen-md ".concat(d?"":"pl-6"),initial:{y:5,opacity:0},animate:{y:0,opacity:1},children:(0,n.jsx)("div",{className:"w-full ".concat(d?"px-6":"pr-6"),children:(0,n.jsxs)(K.w,{className:"z-0 w-full border ".concat(d?"border-2 shadow-lg":""," p-1 text-sm ").concat(d?"":"shadow-none"),style:d?{borderColor:c.baseColor,boxShadow:"0 10px 25px ".concat(c.baseColor,"22")}:{},children:[(0,n.jsxs)(tT.u,{className:"flex items-center justify-between text-base font-bold",children:[(0,n.jsx)("h1",{children:null==a?void 0:a.title}),!d&&(0,n.jsx)(g.A,{onClick:()=>t(!0),variant:"light",size:"sm",isIconOnly:!0,startContent:(0,n.jsx)(tt.Z,{size:16,className:"text-default-400"})})]}),(0,n.jsx)(ey.G,{className:"flex w-full flex-col gap-2 px-3 py-2",children:null==a?void 0:a.fieldList.map((e,t)=>{var a,r,o,c,u;switch(e.type){case i.TEXT:return(0,n.jsx)(tO.Y,{label:e.name,type:"text",size:"sm",autoFocus:d&&0===t,value:(null===(a=s[t])||void 0===a?void 0:a.value)||"",onChange:a=>{l(s=>[...s.slice(0,t),{key:e.name,value:a.target.value},...s.slice(t+1)])}},t);case i.LONGTEXT:return(0,n.jsx)(tc.Y,{label:e.name,autoFocus:d&&0===t,value:(null===(r=s[t])||void 0===r?void 0:r.value)||"",onChange:a=>{l(s=>[...s.slice(0,t),{key:e.name,value:a.target.value},...s.slice(t+1)])}},t);case i.EMAIL:return(0,n.jsx)(tO.Y,{label:e.name,type:"email",autoFocus:d&&0===t,value:(null===(o=s[t])||void 0===o?void 0:o.value)||"",onChange:a=>{l(s=>[...s.slice(0,t),{key:e.name,value:a.target.value},...s.slice(t+1)])}},t);case i.URL:return(0,n.jsx)(tO.Y,{label:e.name,type:"url",autoFocus:d&&0===t,value:(null===(c=s[t])||void 0===c?void 0:c.value)||"",onChange:a=>{l(s=>[...s.slice(0,t),{key:e.name,value:a.target.value},...s.slice(t+1)])}},t);case i.NUMBER:return(0,n.jsx)(tO.Y,{label:e.name,type:"number",autoFocus:d&&0===t,value:(null===(u=s[t])||void 0===u?void 0:u.value)||"",onChange:a=>{l(s=>[...s.slice(0,t),{key:e.name,value:a.target.value},...s.slice(t+1)])}},t);default:return(0,n.jsx)(n.Fragment,{})}})}),(0,n.jsxs)(tU.i,{className:"flex w-full flex-row items-center gap-4",children:[2!==r&&(0,n.jsx)(g.A,{onClick:()=>void o(),isDisabled:s.filter(e=>!e.value||!e.value.trim()).length>0,isLoading:1===r,variant:"solid",color:"primary",style:{backgroundColor:c.baseColor},radius:"md",size:"md",children:u.uxWritingConfig&&u.uxWritingConfig.USER_INFO_SEND_TEXT||"Submit"}),2===r&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-success-500",children:[(0,n.jsx)(E.Z,{size:16,className:"text-success"}),"Submitted!"]}),3===r&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[(0,n.jsx)(ta.Z,{size:16,className:"text-danger"}),"Failed to submit."]})]})]})})})})}(s=i||(i={}))[s.TEXT=0]="TEXT",s[s.LONGTEXT=1]="LONGTEXT",s[s.EMAIL=2]="EMAIL",s[s.URL=3]="URL",s[s.NUMBER=4]="NUMBER";var tL=a(15051);function tK(e){let{isAtBottom:t,scrollToBottom:a}=e;return(0,n.jsx)(h.e,{content:"Scroll to bottom",children:(0,n.jsx)(g.A,{size:"sm",variant:"flat",radius:"full",isIconOnly:!0,color:"default",className:(0,b.cn)("text-white duration-300 transition-all",t?"scale-0 opacity-0":"scale-100 opacity-100"),onPress:a,children:(0,n.jsx)(tL.Z,{size:16})})})}function tG(e){let{children:t,isLoading:a,setIsAtBottom:s,containerRef:i}=e,[l,r]=(0,I.useState)(!1);return(0,I.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{let{scrollTop:t,scrollHeight:a,clientHeight:i}=e,n=t+i>=a-10;e.dataset.atBottom=n.toString(),s(n),r(!n)};return t(),e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}},[s,i]),(0,I.useEffect)(()=>{let e=i.current;e&&!l&&("true"===e.dataset.atBottom||a)&&(e.scrollTop=e.scrollHeight)},[t,a,l]),(0,n.jsx)(eS.o,{ref:i,className:"flex-1 overflow-y-auto",children:t})}function tF(e){let{handleSubmitUserMessage:t,messages:a=[],images:s=[],files:i=[],setInput:l}=e,{chatbotData:r}=(0,v.X)(),[o,d]=(0,I.useState)(!0);(0,I.useEffect)(()=>{a.length>1&&d(!1)},[a.length]);let c=(0,I.useCallback)(e=>{l(e),t({value:e,images:s,files:i})},[t,s,i,l]),u=(0,I.useCallback)(()=>{d(e=>!e)},[]);return 0===r.suggestedMessageList.filter(e=>!!e.trim()).length?null:(0,n.jsx)(Y.E.div,{className:"mx-auto w-full max-w-screen-md px-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,n.jsxs)("div",{className:"flex w-full flex-wrap justify-end gap-2",children:[a.length>1&&(0,n.jsxs)(K.w,{className:"flex w-auto flex-row items-center gap-2 rounded-xl bg-transparent p-3 shadow-none",isPressable:!0,onPress:u,children:[(0,n.jsx)("span",{className:"text-xs text-default-400",children:"Suggested messages"}),(0,n.jsx)($.Z,{className:"h-4 w-4 text-default-400 transition-transform ".concat(o?"rotate-180":"")})]}),o&&(0,n.jsx)(M.M,{children:r.suggestedMessageList.map((e,t)=>(0,n.jsx)(Y.E.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,delay:.05*t},children:(0,n.jsxs)(K.w,{className:"flex w-auto max-w-[32rem] flex-shrink-0 flex-row items-center gap-2 rounded-xl bg-default-100 p-3 shadow-none",isPressable:!0,onPress:()=>c(e),children:[(0,n.jsx)("span",{className:"text-right text-sm text-default-500",children:e}),(0,n.jsx)("span",{className:"flex-shrink-0 text-default-500",children:(0,n.jsx)(tw.Z,{className:"h-4 w-4"})})]})},t))})]})})}let tz=[{id:"6894f2e5673531bb72cc49ef",provider:"OPENAI",displayName:"GPT-5",frontendName:"gpt-5",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:15,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:4e5,maxOutputTokens:128e3,imageInputSupport:!0,audioVideoInputSupport:!0,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"6894f2e6673531bb72cc49f0",provider:"OPENAI",displayName:"GPT-5 Mini",frontendName:"gpt-5-mini",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:3,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:4e5,maxOutputTokens:128e3,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"6894f2e7673531bb72cc49f1",provider:"OPENAI",displayName:"GPT-5 Nano",frontendName:"gpt-5-nano",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:4e5,maxOutputTokens:128e3,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"677b8cfbc02c4dc0b58305cf",provider:"OPENAI",displayName:"o4 Mini",frontendName:"o4-mini",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"Good for complex reasoning and problem-solving tasks. Faster & cheaper than o1.",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:8,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:1e5,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8cfdc02c4dc0b58305d0",provider:"OPENAI",displayName:"o3",frontendName:"o3",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"Best for super complex reasoning and problem-solving tasks.",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:100,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:1e5,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8cfec02c4dc0b58305d1",provider:"OPENAI",displayName:"GPT-4.1 Mini",frontendName:"gpt-4.1-mini",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"Good for almost all tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:3,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1047576,maxOutputTokens:32768,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8cffc02c4dc0b58305d2",provider:"OPENAI",displayName:"GPT-4.1",frontendName:"gpt-4.1",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"Good for almost all tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:15,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1047576,maxOutputTokens:32768,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8d00c02c4dc0b58305d3",provider:"OPENAI",displayName:"ChatGPT Latest",frontendName:"gpt-4.1",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"The most up-to-date model used in ChatGPT. Good for almost all tasks.",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:15,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1047576,maxOutputTokens:32768,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8d01c02c4dc0b58305d4",provider:"ANTHROPIC",displayName:"Claude 3.5 Sonnet",frontendName:"claude-3-5-sonnet-latest",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:20,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"684291398d297de13878b9ae",provider:"ANTHROPIC",displayName:"Claude 4 Sonnet",frontendName:"claude-sonnet-4-20250514",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:20,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"68e9d9393236dd7f6a51c57b",provider:"ANTHROPIC",displayName:"Claude 4.5 Sonnet",frontendName:"claude-sonnet-4-5-20250929",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:20,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"6904a13918e54d50ba33bf31",provider:"ANTHROPIC",displayName:"Claude 4.5 Haiku",frontendName:"claude-haiku-4-5-20251001",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8d02c02c4dc0b58305d5",provider:"ANTHROPIC",displayName:"Claude 3 Haiku",frontendName:"claude-3-haiku-20240307",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Good for creative writing & coding tasks",isRecommended:!1,isDeprecated:!0,aiCreditsPerRequest:5,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:4096,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8d04c02c4dc0b58305d7",provider:"ANTHROPIC",displayName:"Claude 3 Opus",frontendName:"claude-3-opus-20240229",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Good for creative writing & coding tasks",isRecommended:!1,isDeprecated:!0,aiCreditsPerRequest:100,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:4096,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8d04c02c4dc0b58305d8",provider:"GOOGLE",displayName:"Gemini 2.0 Flash",frontendName:"models/gemini-2.0-flash",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"Best model for performance and cost effiency",isRecommended:!0,isDeprecated:!0,aiCreditsPerRequest:1,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1048576,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!0,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"677b8d05c02c4dc0b58305d9",provider:"GOOGLE",displayName:"Gemini 2.0 Flash Thinking",frontendName:"models/gemini-2.0-flash-thinking-exp-01-21",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"Good for reasoning-heavy tasks",isRecommended:!1,isDeprecated:!0,aiCreditsPerRequest:1,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1048576,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"67d8deebf7bae91982459032",provider:"GOOGLE",displayName:"Gemini 2.0 Pro",frontendName:"models/gemini-2.0-pro-exp-02-05",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"Good for working with documents & long-form writing",isRecommended:!1,isDeprecated:!0,aiCreditsPerRequest:1,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],isAvailableByDefault:!1,contextWindow:2e6,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67e38fbde1007172a85ec3ee",provider:"GOOGLE",displayName:"Gemini 2.5 Pro",frontendName:"models/gemini-2.5-pro",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"Best model overall",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1e6,maxOutputTokens:64e3,imageInputSupport:!0,audioVideoInputSupport:!0,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"680235956a96ce1b1cbda218",provider:"GOOGLE",displayName:"Gemini 2.5 Flash",frontendName:"models/gemini-flash-latest",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"New Cost Effective Model",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1e6,maxOutputTokens:64e3,imageInputSupport:!0,audioVideoInputSupport:!0,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"685242ee563714f498fb68ae",provider:"GOOGLE",displayName:"Gemini 2.5 Flash Lite",frontendName:"models/gemini-flash-lite-latest",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"New Cost Effective Model",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:1e6,maxOutputTokens:64e3,imageInputSupport:!0,audioVideoInputSupport:!0,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"6894813d0d60b8715e4c45fe",provider:"GROQ",displayName:"OpenAI OSS 120b",frontendName:"openai/gpt-oss-120b",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"New great opensource reasoning model from OpenAI",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:32e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"687607050b6e416690e81fd5",provider:"GROQ",displayName:"Kimi K2",frontendName:"moonshotai/kimi-k2-instruct",backendName:"moonshotai/kimi-k2-instruct",iconUrl:"https://avatars.githubusercontent.com/u/129152888?s=48&v=4",desc:"Cost-effective & Good for tasks that require image input",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:16e3,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"678e93bd360cf35cf863a631",provider:"GROQ",displayName:"LLaMa 3.3 70b Versatile",frontendName:"llama-3.3-70b-versatile",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1BimzmY8WEO7kP3YSQ6pCwL-BoXBoGfIn",desc:"Cost-effective & Good for tasks that require image input",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:3,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:32768,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!1,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"678e93be360cf35cf863a632",provider:"GROQ",displayName:"LLaMa 3.1 70b Versatile",frontendName:"llama-3.1-70b-versatile",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1BimzmY8WEO7kP3YSQ6pCwL-BoXBoGfIn",desc:"Cost-effective & Good for tasks that don't require knowledge sources",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"678e93be360cf35cf863a633",provider:"GROQ",displayName:"LLaMa 3.1 8b Instant",frontendName:"llama-3.1-8b-instant",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1BimzmY8WEO7kP3YSQ6pCwL-BoXBoGfIn",desc:"Cost-effective & Good for tasks that don't require knowledge sources",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"68e3e9b1e5916e99e1c4f9b7",provider:"AWS_BEDROCK",displayName:"GPT OSS 120B",frontendName:"openai.gpt-oss-120b-1:0",backendName:"openai.gpt-oss-120b-1:0",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"Cost-effective & Good for tasks that don't require knowledge sources",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:128e3,maxOutputTokens:8192,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"68e4d0130e86aa2602e9c463",provider:"AWS_BEDROCK",displayName:"DeepSeek V3.1",frontendName:"deepseek.v3-v1:0",backendName:"deepseek.v3-v1:0",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Cost-effective & Good for tasks that don't require knowledge sources",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:163840,maxOutputTokens:81920,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"678e93bf360cf35cf863a634",provider:"AWS_BEDROCK",displayName:"LLaMa 3.1 70b Instruct",frontendName:"us.meta.llama3-1-70b-instruct-v1:0",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1BimzmY8WEO7kP3YSQ6pCwL-BoXBoGfIn",desc:"Cost-effective & Good for tasks that don't require knowledge sources",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:3,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:128e3,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"678e93bf360cf35cf863a635",provider:"AWS_BEDROCK",displayName:"LLaMa 3.1 8b Instruct",frontendName:"us.meta.llama3-1-8b-instruct-v1:0",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1BimzmY8WEO7kP3YSQ6pCwL-BoXBoGfIn",desc:"Cost-effective & Good for tasks that don't require knowledge sources",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:.2,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:128e3,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!0},{id:"678e93c0360cf35cf863a636",provider:"PERPLEXITY",displayName:"Sonar",frontendName:"sonar",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1LR16_y5rzRo_3BVyv1F7DUHNjnA5C0J3",desc:"Good for tasks that require research & fact-checking",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["PERPLEXITY_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!0},{id:"678e93c0360cf35cf863a637",provider:"PERPLEXITY",displayName:"Sonar Pro",frontendName:"sonar-pro",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1LR16_y5rzRo_3BVyv1F7DUHNjnA5C0J3",desc:"Good for tasks that require research & fact-checking",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["PERPLEXITY_API_KEY"],isAvailableByDefault:!1,contextWindow:2e5,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"678e93c1360cf35cf863a638",provider:"PERPLEXITY",displayName:"Sonar Reasoning",frontendName:"sonar-reasoning",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1LR16_y5rzRo_3BVyv1F7DUHNjnA5C0J3",desc:"Good for tasks that require research & fact-checking",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["PERPLEXITY_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"678e93c1360cf35cf863a639",provider:"XAI",displayName:"Grok 2 Latest",frontendName:"grok-2-latest",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1hkj0pkAGw99_SIVFIVgxyAAKgqCvm2m6",desc:"Good for general tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["XAI_API_KEY"],isAvailableByDefault:!1,contextWindow:131072,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"678e93c2360cf35cf863a63a",provider:"XAI",displayName:"Grok 2 Vision Latest",frontendName:"grok-2-vision-latest",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1hkj0pkAGw99_SIVFIVgxyAAKgqCvm2m6",desc:"Good for general tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["XAI_API_KEY"],isAvailableByDefault:!1,contextWindow:8192,maxOutputTokens:4096,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"67a785280052227b09b3c26a",provider:"OPENAI",displayName:"o3 Mini",frontendName:"o3-mini",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1P4aZHpr5iCFXkUdVIheDo_gahGmUIoZ3",desc:"Best for complex reasoning and problem-solving tasks. Faster & cheaper than o1.",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["OPENAI_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:1e5,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67a785290052227b09b3c26b",provider:"TOGETHER_AI",displayName:"DeepSeek V3",frontendName:"deepseek-ai/DeepSeek-V3",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Good for general tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["TOGETHER_AI_API_KEY"],isAvailableByDefault:!0,contextWindow:64e3,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!0},{id:"67a7852a0052227b09b3c26c",provider:"TOGETHER_AI",displayName:"DeepSeek R1",frontendName:"deepseek-ai/DeepSeek-R1",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Good for tasks that require reasoning",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:50,requiredCredentialTypes:["TOGETHER_AI_API_KEY"],isAvailableByDefault:!0,contextWindow:64e3,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"67a786e8d73622d527328c51",provider:"AWS_BEDROCK",displayName:"Claude 3.5 Sonnet",frontendName:"us.anthropic.claude-3-5-sonnet-20241022-v2:0",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67a786e8d73622d527328c52",provider:"AWS_BEDROCK",displayName:"Claude 3.5 Haiku",frontendName:"us.anthropic.claude-3-5-haiku-20241022-v1:0",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Good for creative writing & coding tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:2,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67b851e0f9169f1a3fc96bda",provider:"PERPLEXITY",displayName:"Sonar Reasoning Pro",frontendName:"sonar-reasoning-pro",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1LR16_y5rzRo_3BVyv1F7DUHNjnA5C0J3",desc:"Good for tasks that require research & fact-checking",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:8,requiredCredentialTypes:["PERPLEXITY_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"67bea5a9fd2c007eb60d63f8",provider:"AWS_BEDROCK",displayName:"Claude 3.7 Sonnet",frontendName:"us.anthropic.claude-3-7-sonnet-20250219-v1:0",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:10,requiredCredentialTypes:["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67beac16fd2c007eb60d63f9",provider:"ANTHROPIC",displayName:"Claude 3.7 Sonnet",frontendName:"claude-3-7-sonnet-20250219",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1YWQHqD9NDr4qApZsawfl9SNCqMaRxiXi",desc:"Best for creative writing & coding tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:20,requiredCredentialTypes:["ANTHROPIC_API_KEY"],isAvailableByDefault:!0,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67beca8efd2c007eb60d63fa",provider:"PERPLEXITY",displayName:"Sonar Deep Research",frontendName:"sonar-deep-research",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1LR16_y5rzRo_3BVyv1F7DUHNjnA5C0J3",desc:"Good for tasks that require research & fact-checking",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:20,requiredCredentialTypes:["PERPLEXITY_API_KEY"],isAvailableByDefault:!1,contextWindow:6e4,maxOutputTokens:4096,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"67d167ada591af66709a0bb1",provider:"GROQ",displayName:"DeepSeek R1 Distill Qwen 32b",frontendName:"qwen/qwen3-32b",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Cost-effective & Good for tasks that require image input",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:3,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:16e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"67d16817a591af66709a0bb2",provider:"GROQ",displayName:"DeepSeek R1 Distill LLaMa 70b",frontendName:"deepseek-r1-distill-llama-70b",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Cost-effective & Good for tasks that require image input",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:3,requiredCredentialTypes:["GROQ_API_KEY"],isAvailableByDefault:!1,contextWindow:128e3,maxOutputTokens:16e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"67e39acb8eb6e09c6331590c",provider:"DEEPSEEK",displayName:"DeepSeek V3",frontendName:"deepseek-chat",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Good for general tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:.5,requiredCredentialTypes:["DEEPSEEK_API_KEY"],isAvailableByDefault:!1,contextWindow:64e3,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"67e3a2008eb6e09c6331590d",provider:"DEEPSEEK",displayName:"DeepSeek R1",frontendName:"deepseek-reasoner",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1Qk0ZsnCaF_aFaIP8LDTJH8ViBPsGAJ5F",desc:"Good for reasoning tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:.5,requiredCredentialTypes:["DEEPSEEK_API_KEY"],isAvailableByDefault:!1,contextWindow:64e3,maxOutputTokens:8e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isUsedForApiKeyValidation:!1},{id:"68ea21761324e61cdb676c0b",provider:"GOOGLE",displayName:"Nano Banana (Gemini 2.5 Flash Image)",frontendName:"models/gemini-2.5-flash-image",backendName:"Unnamed",iconUrl:"https://lh3.googleusercontent.com/d/1fmTAMln1omCDey4pQsw4Rloq-vdNxobt",desc:"State-of-the-art image generation & editing model",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["GOOGLE_GENAI_API_KEY"],contextWindow:1e6,maxOutputTokens:64e3,imageInputSupport:!0,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!1,isAvailableByDefault:!0,isUsedForApiKeyValidation:!1},{id:"690f716300349eb5a9bab276",provider:"FIREWORKS",displayName:"GLM 4.6",frontendName:"accounts/fireworks/models/glm-4p6",backendName:"accounts/fireworks/models/glm-4p6",iconUrl:"https://lh3.googleusercontent.com/d/1hkj0pkAGw99_SIVFIVgxyAAKgqCvm2m6",desc:"Good for general tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["FIREWORKS_API_KEY"],isAvailableByDefault:!1,contextWindow:198e3,maxOutputTokens:8192,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!0},{id:"690f716300349eb5a9bab277",provider:"FIREWORKS",displayName:"Kimi K2 Thinking",frontendName:"accounts/fireworks/models/kimi-k2-thinking",backendName:"accounts/fireworks/models/kimi-k2-thinking",iconUrl:"https://avatars.githubusercontent.com/u/129152888?s=48&v=4",desc:"Good for reasoning tasks",isRecommended:!1,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["FIREWORKS_API_KEY"],isAvailableByDefault:!1,contextWindow:2e5,maxOutputTokens:8192,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1},{id:"690f716300349eb5a9bab278",provider:"FIREWORKS",displayName:"Mini Max M2",frontendName:"accounts/fireworks/models/minimax-m2",backendName:"accounts/fireworks/models/minimax-m2",iconUrl:"https://lh3.googleusercontent.com/d/1hkj0pkAGw99_SIVFIVgxyAAKgqCvm2m6",desc:"Good for general tasks",isRecommended:!0,isDeprecated:!1,aiCreditsPerRequest:1,requiredCredentialTypes:["FIREWORKS_API_KEY"],isAvailableByDefault:!1,contextWindow:2e5,maxOutputTokens:16e3,imageInputSupport:!1,audioVideoInputSupport:!1,systemPromptSupport:!0,toolUsageSupport:!0,isUsedForApiKeyValidation:!1}];tz.find(e=>"677b8cffc02c4dc0b58305d2"===e.id),tz.find(e=>"680235956a96ce1b1cbda218"===e.id);var tV=a(72694),tq=a(17936);let tB=e=>{let{type:t}=e;return t===eD.ArtifactKind.TEXT?(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,n.jsx)("div",{className:"h-12 w-1/2 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-full animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-full animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-1/3 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-52 animate-pulse rounded-lg bg-transparent"}),(0,n.jsx)("div",{className:"h-8 w-52 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-2/3 animate-pulse rounded-lg bg-default-500/20"})]}):t===eD.ArtifactKind.HTML?(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"h-8 w-32 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-8 w-24 animate-pulse rounded-lg bg-default-500/20"})]}),(0,n.jsx)("div",{className:"h-96 w-full animate-pulse rounded-lg bg-default-500/20"})]}):t===eD.ArtifactKind.CAROUSEL?(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"h-8 w-32 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-8 w-24 animate-pulse rounded-lg bg-default-500/20"})]}),(0,n.jsx)("div",{className:"mx-auto h-80 w-64 animate-pulse rounded-lg bg-default-500/20"})]}):(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,n.jsx)("div",{className:"h-12 w-1/2 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-full animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-full animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-1/3 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-52 animate-pulse rounded-lg bg-transparent"}),(0,n.jsx)("div",{className:"h-8 w-52 animate-pulse rounded-lg bg-default-500/20"}),(0,n.jsx)("div",{className:"h-5 w-2/3 animate-pulse rounded-lg bg-default-500/20"})]})};class tW{constructor(e){this.kind=e.kind,this.description=e.description,this.content=e.content,this.actions=e.actions||[],this.initialize=e.initialize,this.onStreamPart=e.onStreamPart}}var tM=a(69235),tY=a(77319);a(79006),a(88889);let tZ=(0,I.memo)(function(e){let{content:t,onContentChange:a,editable:s=!0,status:i="idle",containerClassName:l="w-full px-8 py-6"}=e,r=(0,tY.$c)({initialContent:t.json}),[o,d]=(0,I.useState)(!1),c=async e=>{o||d(!0);let t=await r.tryParseMarkdownToBlocks(e);r.replaceBlocks(r.document,t),o&&d(!1)},u=async e=>{o||d(!0);let t=await r.tryParseHTMLToBlocks(e);r.replaceBlocks(r.document,t),o&&d(!1)};(0,I.useEffect)(()=>{"streaming"!==i&&t.json||(async()=>{t.markdown?await c(t.markdown):t.html&&await u(t.html)})()},[t.markdown,t.html,i]);let m=async()=>{let e=await r.blocksToMarkdownLossy(r.document),t=await r.blocksToFullHTML(r.document),s=r.document,i=s;"string"!=typeof s&&Array.isArray(s)&&(i=null==s?void 0:s.map(e=>"type"in e&&"string"==typeof e.type&&"table"===e.type&&"content"in e&&"columnWidths"in e.content?{...e,content:{...e.content,columnWidths:e.content.columnWidths.map(e=>void 0===e?100:e)}}:e)),null==a||a(e,t,i)};return(0,n.jsx)("div",{className:l,children:!o||t.json||t.markdown||t.html?(0,n.jsx)(tM.L6,{editor:r,editable:s,theme:"light",onChange:()=>void m(),formattingToolbar:!1,children:(0,n.jsx)(tY.V5,{formattingToolbar:()=>(0,n.jsxs)(tY.DR,{children:[(0,n.jsx)(tY.Ir,{},"blockTypeSelect"),(0,n.jsx)(tY.LM,{},"fileCaptionButton"),(0,n.jsx)(tY.rR,{},"replaceFileButton"),(0,n.jsx)(tY.lI,{basicTextStyle:"bold"},"boldStyleButton"),(0,n.jsx)(tY.lI,{basicTextStyle:"italic"},"italicStyleButton"),(0,n.jsx)(tY.lI,{basicTextStyle:"underline"},"underlineStyleButton"),(0,n.jsx)(tY.lI,{basicTextStyle:"strike"},"strikeStyleButton"),(0,n.jsx)(tY.fe,{},"createLinkButton")]})})}):(0,n.jsx)(tB,{type:eD.ArtifactKind.TEXT})})},(e,t)=>e.editable===t.editable&&e.status===t.status&&e.content.markdown===t.content.markdown&&e.content.html===t.content.html&&JSON.stringify(e.content.json)===JSON.stringify(t.content.json)),tH=new tW({kind:eD.ArtifactKind.TEXT,description:"Useful for text content, like drafting essays and emails.",onStreamPart:e=>{let{streamPart:t,setArtifact:a}=e;"data-textDelta"===t.type&&a(e=>{let a={text:t.data};return{...e,content:JSON.stringify(a),isVisible:"streaming"===e.status||e.isVisible,status:"streaming"}})},content:e=>{let{content:t,onSaveContent:a,isLoading:s,status:i}=e;if(s)return(0,n.jsx)(tB,{type:eD.ArtifactKind.TEXT});let l="";try{l=JSON.parse(t).text||""}catch(e){l=t}return(0,n.jsx)(tZ,{content:{markdown:l},onContentChange:e=>{e!==l&&a(JSON.stringify({text:e}),!0)},status:i})},actions:[{icon:(0,n.jsx)(_.Z,{size:16}),description:"Copy to clipboard",onClick:e=>{let{content:t}=e,a=t;try{a=JSON.parse(t).text||t}catch(e){a=t}navigator.clipboard.writeText(a),eb.Am.success("Copied to clipboard!")}}]});var tX=a(12708),tQ=a(94942),tJ=(0,U.$)("7ce5b39454bc25925ddeb084e06aaae5ac9fb785"),t$=(0,U.$)("5636e37e7a9f6eae30d1545ec6f29ceca482e11e"),t0=(0,U.$)("702e0e9231b9a24162a530b18fc9df0aeac11a7b"),t1=a(90277),t2=a(62997),t3=a(67891),t5=a(85325),t4=a(98322);let t6=(0,I.memo)(function(e){let{content:t,onSaveContent:a,status:s,language:i="python"}=e,l=(0,I.useRef)(null),r=(0,I.useRef)(null),o=()=>"html"===i?(0,t5.dy)():(0,t3.Vs)();return(0,I.useEffect)(()=>{if(l.current&&!r.current){let e=t2.yy.create({doc:t,extensions:[t4.Xy,o()]});r.current=new t1.tk({state:e,parent:l.current})}return()=>{r.current&&(r.current.destroy(),r.current=null)}},[]),(0,I.useEffect)(()=>{if(r.current){let e=t1.tk.updateListener.of(e=>{e.docChanged&&e.transactions.find(e=>!e.annotation(t2.YW.remote))&&a(e.state.doc.toString(),!0)}),t=r.current.state.selection,s=t2.yy.create({doc:r.current.state.doc,extensions:[t4.Xy,o(),e],selection:t});r.current.setState(s)}},[a,i]),(0,I.useEffect)(()=>{if(r.current&&t){let e=r.current.state.doc.toString();if("streaming"===s||e!==t){let a=r.current.state.update({changes:{from:0,to:e.length,insert:t},annotations:[t2.YW.remote.of(!0)]});r.current.dispatch(a)}}},[t,s]),(0,n.jsx)("div",{className:"not-prose relative w-full text-sm",ref:l})},function(e,t){return("streaming"!==e.status||"streaming"!==t.status)&&e.content===t.content&&e.language===t.language});var t8=a(59674),t9=a(5692),t7=a(34685),ae=a(62622),at=a(87121),aa=a(47416),as=a(74440);function ai(e){var t;let a,{content:s,onSaveContent:i,isLoading:l,status:r,documentId:o}=e,[d,u]=(0,I.useState)("code"),[m,p]=(0,I.useState)(1),[f,x]=(0,I.useState)(null),[h,v]=(0,I.useState)(!1),[y,w]=(0,I.useState)(!1),[b,N]=(0,I.useState)(!1),{isOpen:j,onOpen:C,onClose:A}=(0,L.q)();try{a=s?JSON.parse(s):{documents:[]}}catch(e){a={documents:[]}}(0,I.useEffect)(()=>{"streaming"===r&&a.documents.length>m&&p(a.documents.length)},[r,a.documents.length,m]),(0,I.useEffect)(()=>{"code"===d&&"streaming"!==r&&o&&a.documents.length>0&&!f&&!b&&(u("preview"),S())},[d,r,o,a.documents.length,f,b]);let S=async()=>{if(o&&!h&&!f){v(!0);try{let e=await t$(o);e.success?x(e):eb.Am.warning("Failed to load secure preview: ".concat(e.error||""))}catch(e){eb.Am.warning("Failed to load secure preview"),console.error("Preview error:",e)}finally{v(!1)}}};if(0===a.documents.length)return(0,n.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,n.jsx)("p",{className:"text-default-500",children:"No HTML documents available"})});let E=a.documents[m-1],_=a.documents.length,k=(()=>{if((null==f?void 0:f.files)&&f.files[m-1]){let e=f.files[m-1];if(e){let{width:t,height:a}=e;return{width:t,height:a,aspectRatio:a/t}}}return E?{width:E.width,height:E.height,aspectRatio:E.height/E.width}:{width:1200,height:800,aspectRatio:.67}})(),P=null==f?void 0:null===(t=f.files)||void 0===t?void 0:t[m-1],R=Math.min(800/k.width,600/k.height,1),T=k.width*R,O=k.height*R,U=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?{width:"100%",height:"100%"}:{width:"".concat(k.width,"px"),height:"".concat(k.height,"px"),transform:"scale(".concat(R,")"),transformOrigin:"top left"};return(0,n.jsx)("iframe",{src:null==P?void 0:P.previewUrl,className:e?"h-full w-full border-0":"absolute left-0 top-0 border-0",title:"Preview of ".concat((null==E?void 0:E.filename)||"document"),sandbox:"allow-scripts allow-same-origin allow-forms",style:t})};return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsx)(t8.g,{total:_,page:m,onChange:p,size:"sm",showControls:!0,variant:"light"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(t9.n,{selectedKey:d,onSelectionChange:e=>{u(e),N(!0),"preview"!==e||!o||f||h||S()},variant:"solid",radius:"full",children:[(0,n.jsx)(t7.r,{title:"Preview",isDisabled:!o||"streaming"===r},"preview"),(0,n.jsx)(t7.r,{title:"Code"},"code")]}),"preview"===d&&P&&(0,n.jsx)(g.A,{isIconOnly:!0,variant:"light",size:"sm",onPress:C,className:"ml-1",children:(0,n.jsx)(aa.Z,{className:"h-4 w-4"})})]})]}),(0,n.jsx)("div",{className:"flex-1 pb-8",children:"preview"===d?(0,n.jsx)("div",{className:"h-full px-4",children:h?(0,n.jsx)(K.w,{className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)(c.c,{})}):P?(0,n.jsx)("div",{className:"flex h-full flex-col items-center justify-center gap-2",style:{minHeight:"".concat(O,"px")},children:(0,n.jsxs)(K.w,{className:"relative overflow-hidden",style:{width:"".concat(T,"px"),height:"".concat(O,"px")},onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[y&&(0,n.jsxs)(ae.z,{variant:"flat",color:"default",size:"sm",className:"absolute left-2 top-2 z-10",children:[null==E?void 0:E.width," x ",null==E?void 0:E.height]}),U(!1)]})}):(0,n.jsx)(K.w,{className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)("p",{className:"text-sm text-default-500",children:"Failed to load preview. Please reload the page."})})}):(0,n.jsx)("div",{className:"h-full px-4",children:(0,n.jsx)(K.w,{children:(0,n.jsx)(t6,{content:(null==E?void 0:E.html)||"",onSaveContent:e=>{i(JSON.stringify({...a,documents:a.documents.map((t,a)=>a===m-1?{...t,html:e}:t)}),!0),x(null)},status:r,language:"html"})})})}),(0,n.jsx)(G.R,{isOpen:j,onClose:A,size:"full",classNames:{wrapper:"p-0",base:"m-0 sm:m-0 max-w-full h-screen",body:"p-0"},hideCloseButton:!0,children:(0,n.jsxs)(F.A,{children:[(0,n.jsxs)(at.k,{className:"flex items-center justify-between border-b px-6 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:(null==E?void 0:E.filename)||"Preview"}),_>1&&(0,n.jsx)(t8.g,{total:_,page:m,onChange:p,size:"sm",showControls:!0,variant:"light"})]}),(0,n.jsx)(g.A,{isIconOnly:!0,variant:"light",size:"sm",onPress:A,children:(0,n.jsx)(as.Z,{className:"h-4 w-4"})})]}),(0,n.jsx)(z.I,{className:"h-full overflow-hidden",children:P&&U(!0)})]})})]})}let an=[tH,new tW({kind:eD.ArtifactKind.HTML,description:"Useful for creating HTML documents, web pages, and interactive content. Can create multiple documents in a single canvas.",onStreamPart:e=>{let{streamPart:t,setArtifact:a}=e;if("data-htmlDelta"===t.type)try{let{documentIndex:e,html:s,width:i,height:n,filename:l}=JSON.parse(t.data);a(t=>{let a;let r=t.content;try{a=r?JSON.parse(r):{documents:[]}}catch(e){a={documents:[]}}for(;a.documents.length<=e;)a.documents.push({html:"",width:1200,height:800,filename:"document-".concat(a.documents.length+1,".html")});let o=a.documents[e];return o&&(a.documents[e]={html:s||o.html,width:i||o.width,height:n||o.height,filename:l||o.filename}),{...t,content:JSON.stringify(a),isVisible:"streaming"===t.status||t.isVisible,status:"streaming"}})}catch(e){console.error("Error parsing HTML delta:",e)}},content:e=>{let{content:t,onSaveContent:a,isLoading:s,status:i,documentId:l}=e;return s?(0,n.jsx)(tB,{type:eD.ArtifactKind.HTML}):(0,n.jsx)(ai,{content:t,onSaveContent:(e,t)=>a(e,null!=t&&t),isLoading:s,status:i,documentId:null!=l?l:void 0})},actions:[{icon:(0,n.jsx)(_.Z,{size:16}),description:"Copy HTML to clipboard",onClick:e=>{let{content:t}=e;try{let e=JSON.parse(t).documents.map(e=>"<!-- ".concat(e.filename," -->\n").concat(e.html)).join("\n\n");navigator.clipboard.writeText(e),eb.Am.success("HTML copied to clipboard!")}catch(e){eb.Am.warning("Failed to copy HTML")}}},{icon:(0,n.jsx)(tX.Z,{size:16}),description:"Export to PNG",onClick:async e=>{let{content:t,metadata:a,documentId:s}=e;try{let e=JSON.parse(t);if(0===e.documents.length){eb.Am.warning("No HTML documents to export");return}if(!s){eb.Am.warning("Canvas must be saved before exporting to PNG. Please wait for the artifact to finish generating.");return}let a=Math.max(...e.documents.map(e=>e.width)),i=Math.max(...e.documents.map(e=>e.height)),n=(async()=>{let e=await t0(s,a,i,6e4);if(e.success&&e.files)return e.files.forEach(e=>{let t=document.createElement("a");t.href="data:image/png;base64,".concat(e.base64),t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t)}),"Downloaded ".concat(e.files.length," PNG file(s)!");throw Error(e.error||"Failed to generate PNG exports")})();await eb.Am.promise(n,{pending:"Exporting HTML to PNG...",success:"PNG export completed successfully!",error:"Failed to export HTML to PNG"})}catch(e){console.error("PNG export error:",e)}}},{icon:(0,n.jsx)(tQ.Z,{size:16}),description:"Export to PDF",onClick:async e=>{let{content:t,metadata:a,documentId:s}=e;try{let e=JSON.parse(t);if(0===e.documents.length){eb.Am.warning("No HTML documents to export");return}if(!s){eb.Am.warning("Canvas must be saved before exporting to PDF. Please wait for the artifact to finish generating.");return}let a=Math.max(...e.documents.map(e=>e.width)),i=Math.max(...e.documents.map(e=>e.height)),n=(async()=>{let e=await tJ(s,a,i,6e4);if(e.success&&e.base64&&e.filename){let t=document.createElement("a");return t.href="data:application/pdf;base64,".concat(e.base64),t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t),"PDF export completed successfully!"}throw Error(e.error||"Failed to generate PDF export")})();await eb.Am.promise(n,{pending:"Exporting HTML to PDF...",success:"PDF export completed successfully!",error:"Failed to export HTML to PDF"})}catch(e){console.error("PDF export error:",e)}}}]}),new tW({kind:eD.ArtifactKind.CAROUSEL,description:"Useful for creating carousel posts with multiple slides. Perfect for social media carousels, step-by-step guides, and visual storytelling.",onStreamPart:e=>{let{streamPart:t,setArtifact:a}=e;if("data-carouselDelta"===t.type)try{let{documentIndex:e,html:s,width:i,height:n,filename:l}=JSON.parse(t.data);a(t=>{let a;let r=t.content;try{a=r?JSON.parse(r):{documents:[]}}catch(e){a={documents:[]}}for(;a.documents.length<=e;)a.documents.push({html:"",width:540,height:675,filename:"slide-".concat(a.documents.length+1,".html")});let o=a.documents[e];return o&&(a.documents[e]={html:s||o.html,width:i||o.width,height:n||o.height,filename:l||o.filename}),{...t,content:JSON.stringify(a),isVisible:"streaming"===t.status||t.isVisible,status:"streaming"}})}catch(e){console.error("Error parsing carousel delta:",e)}},content:e=>{let{content:t,onSaveContent:a,isLoading:s,status:i,documentId:l}=e;return s?(0,n.jsx)(tB,{type:eD.ArtifactKind.CAROUSEL}):(0,n.jsx)(ai,{content:t,onSaveContent:(e,t)=>a(e,null!=t&&t),isLoading:s,status:i,documentId:null!=l?l:void 0})},actions:[{icon:(0,n.jsx)(_.Z,{size:16}),description:"Copy HTML",onClick:async e=>{let{content:t}=e;try{let e=JSON.parse(t);if(0===e.documents.length){eb.Am.warning("No carousel slides to copy");return}let a=e.documents.map((e,t)=>"<!-- Slide ".concat(t+1,": ").concat(e.filename," -->\n").concat(e.html)).join("\n\n");await navigator.clipboard.writeText(a),eb.Am.info("Carousel HTML copied to clipboard!")}catch(e){console.error("Copy error:",e),eb.Am.warning("Failed to copy carousel HTML")}}},{icon:(0,n.jsx)(tX.Z,{size:16}),description:"Export to PNG",onClick:async e=>{let{content:t,metadata:a,documentId:s}=e;try{let e=JSON.parse(t);if(0===e.documents.length){eb.Am.warning("No carousel slides to export");return}if(!s){eb.Am.warning("Canvas must be saved before exporting to PNG. Please wait for the artifact to finish generating.");return}let a=Math.max(...e.documents.map(e=>e.width)),i=Math.max(...e.documents.map(e=>e.height)),n=(async()=>{let e=await t0(s,a,i,6e4);if(e.success&&e.files)return e.files.forEach(e=>{let t=document.createElement("a");t.href="data:image/png;base64,".concat(e.base64),t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t)}),"Downloaded ".concat(e.files.length," carousel slide(s)!");throw Error(e.error||"Failed to generate PNG exports")})();await eb.Am.promise(n,{pending:"Exporting carousel to PNG...",success:"Carousel PNG export completed successfully!",error:"Failed to export carousel to PNG"})}catch(e){console.error("PNG export error:",e)}}},{icon:(0,n.jsx)(tQ.Z,{size:16}),description:"Export to PDF",onClick:async e=>{let{content:t,metadata:a,documentId:s}=e;try{let e=JSON.parse(t);if(0===e.documents.length){eb.Am.warning("No carousel slides to export");return}if(!s){eb.Am.warning("Canvas must be saved before exporting to PDF. Please wait for the artifact to finish generating.");return}let a=Math.max(...e.documents.map(e=>e.width)),i=Math.max(...e.documents.map(e=>e.height)),n=(async()=>{let e=await tJ(s,a,i,6e4);if(e.success&&e.base64&&e.filename){let t=document.createElement("a");return t.href="data:application/pdf;base64,".concat(e.base64),t.download=e.filename,document.body.appendChild(t),t.click(),document.body.removeChild(t),"Carousel PDF downloaded successfully!"}throw Error(e.error||"Failed to generate PDF export")})();await eb.Am.promise(n,{pending:"Exporting carousel to PDF...",success:"Carousel PDF export completed successfully!",error:"Failed to export carousel to PDF"})}catch(e){console.error("PDF export error:",e)}}}]})],al=tN.z.object({html:tN.z.string(),width:tN.z.number().positive().describe("The width of the document in pixels."),height:tN.z.number().positive().describe("The height of the document in pixels."),filename:tN.z.string().describe("The filename of the document.")});al.extend({documentIndex:tN.z.number()}),al.extend({documentIndex:tN.z.number()});var ar=a(21109);let ao=(0,I.memo)(function(e){let{artifact:t,mode:a,metadata:s,setMetadata:i}=e,[l,r]=(0,I.useState)(!1),o=an.find(e=>e.kind===t.kind);if(!o)throw Error("Artifact definition not found!");let d={content:t.content,mode:a,metadata:s,setMetadata:i,documentId:t.documentId};return(0,n.jsx)(ar.g,{children:o.actions.map(e=>(0,n.jsx)(h.e,{content:e.description,children:(0,n.jsx)(g.A,{variant:"light",color:"primary",size:"sm",onClick:async()=>{r(!0);try{await Promise.resolve(e.onClick(d))}catch(e){eb.Am.error("Failed to execute action")}finally{r(!1)}},isDisabled:!!l||"streaming"===t.status||!!e.isDisabled&&e.isDisabled(d),startContent:e.icon,isIconOnly:!e.label,children:e.label})}))})},(e,t)=>e.artifact.status===t.artifact.status&&e.artifact.content===t.artifact.content);function ad(){let{artifact:e,setArtifact:t,metadata:a,setMetadata:s}=eG(),{data:i,isLoading:l,refetch:r}=e0.h.artifact.getById.useQuery({id:e.documentId||""},{enabled:!!e.documentId&&e.isVisible,refetchOnMount:!0,trpc:{context:{skipBatch:!0}},onSuccess:a=>{let s;a&&"streaming"!==e.status&&(a.kind===eD.ArtifactKind.TEXT?s=a.content.text:(a.kind,eD.ArtifactKind.HTML,s=JSON.stringify(a.content)),t(e=>e.content!==s?{...e,content:s}:e))}}),o="edit",[d,c]=(0,I.useState)(!1),u=e0.h.artifact.updateContent.useMutation({onMutate:()=>{c(!0)},onSuccess:()=>{c(!1)}}),m=(0,I.useCallback)(t=>{let a;if(e.documentId&&t.trim()){if(e.kind===eD.ArtifactKind.TEXT)a={text:t};else if(e.kind===eD.ArtifactKind.HTML)try{a=JSON.parse(t)}catch(e){a={documents:[]}}else try{a=JSON.parse(t)}catch(e){a={content:t}}u.mutate({id:e.documentId,content:a})}},[e.documentId,e.kind,u.mutate]),p=(0,tV.Sf)(m,2e3),f=(0,I.useCallback)((t,a)=>{t.trim()&&e.documentId&&t!==(null==i?void 0:i.content)&&"idle"===e.status&&(c(!0),a?p(t):m(t))},[null==i?void 0:i.content,e.status,p,m]),x=an.find(t=>t.kind===e.kind);return((0,I.useEffect)(()=>{e.documentId&&(null==x?void 0:x.initialize)&&x.initialize({documentId:e.documentId,setMetadata:s})},[e.documentId,x,s]),(0,I.useEffect)(()=>{"idle"===e.status&&d&&!u.isLoading&&f(e.content,!1)},[d,e.status,u.isLoading]),(0,I.useEffect)(()=>{"idle"!==e.status||!e.documentId||e.content||l||r()},[e.status,e.documentId,e.content,l]),x)?(0,n.jsx)(M.M,{children:e.isVisible&&(0,n.jsxs)(Y.E.div,{className:"-shadow-offset-x-4 flex h-full flex-none flex-col border-l border-neutral-200 bg-white shadow-2xl shadow-default-500/30",initial:{opacity:0,x:50,width:0},animate:{opacity:1,x:0,width:"55%",transition:{delay:.1,type:"spring",stiffness:200,damping:30}},exit:{opacity:0,x:50,width:0,scale:.97,transition:{type:"spring",stiffness:300,damping:35}},children:[(0,n.jsxs)(Y.E.div,{className:"flex items-center justify-between gap-4 p-4",initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,y:-10,transition:{duration:.2}},children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)(g.A,{onPress:()=>t(e=>({...e,isVisible:!1})),isIconOnly:!0,variant:"flat",color:"default",size:"sm",children:(0,n.jsx)(eZ.Z,{className:"h-4 w-4 text-default-500"})}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-0",children:[(0,n.jsx)("h3",{className:"line-clamp-1 text-sm text-default-700",children:e.title}),(d||i)&&(0,n.jsx)("p",{className:"text-xs text-default-400",children:d?"Saving changes...":i?"Updated ".concat((0,tq.B)(new Date(i.createdAt),new Date,{addSuffix:!0})):""})]})]}),(0,n.jsx)(ao,{artifact:e,mode:o,metadata:a,setMetadata:s})]}),(0,n.jsx)(Y.E.div,{className:"flex h-full w-full flex-col items-center justify-center overflow-y-auto",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{type:"spring",stiffness:200,damping:25}},exit:{opacity:0,x:20,transition:{duration:.15}},children:(0,n.jsx)(eS.o,{className:"h-full w-full p-4",children:(0,n.jsx)(x.content,{title:e.title,content:e.content,mode:o,status:e.status,onSaveContent:f,isInline:!1,isLoading:l||!e.content,metadata:a,setMetadata:s,documentId:e.documentId},e.documentId)})})]})}):null}function ac(){let{dataStream:e}=(0,eL.A)(),{artifact:t,setArtifact:a,setMetadata:s}=eG(),i=(0,I.useRef)(-1);return(0,I.useEffect)(()=>{if(!(null==e?void 0:e.length))return;let n=e.slice(i.current+1);i.current=e.length-1,n.forEach(e=>{let i=an.find(e=>e.kind===t.kind);(null==i?void 0:i.onStreamPart)&&i.onStreamPart({streamPart:e,setArtifact:a,setMetadata:s}),a(t=>{if(!t)return{...eK,status:"streaming"};switch(e.type){case"data-id":return{...t,documentId:e.data,status:"streaming"};case"data-title":return{...t,title:e.data,status:"streaming"};case"data-kind":return{...t,kind:e.data,status:"streaming"};case"data-clear":return{...t,content:"",status:"streaming"};case"data-finish":return{...t,status:"idle"};default:return t}})})},[e,a,s,t]),null}var au=(0,U.$)("eecfaa7bf0b0693522851036cea879d9d5e3a361");let am=e=>{if(!e.aiCreditLimit)return{canProceed:!0};let t=e.aiCreditCount,a=e.aiCreditLimit,s=t+e.numAiQueriesToBeConsumed;return(au({aiCreditCount:e.aiCreditCount,aiCreditLimit:e.aiCreditLimit,numAiQueriesToBeConsumed:e.numAiQueriesToBeConsumed,workspaceId:e.workspaceId}).catch(e=>{console.error("[[AI CREDIT USAGE ALERT ERROR]] ",e)}),s>Math.floor(1.1*a))?{canProceed:!1,message:"Insufficient AI credits to continue."}:{canProceed:!0}},ap=e=>({canProceed:!0,message:void 0});var af=a(96362);function ax(){var e;let{workflowSidePanel:t,closeWorkflowUseSidePanel:a}=e$(),{data:s,isLoading:i}=e0.h.workflowRun.getById.useQuery({runId:t.workflowRunId},{enabled:!!t.workflowRunId});if(!t.workflowRunId||!t.workflowId)return null;let l="".concat(tS.NEXT_PUBLIC_WORKFLOW_VIEWER_URL,"/").concat(t.workflowId,"?wrid=").concat(t.workflowRunId);return i||!s?(0,n.jsx)(M.M,{children:t.isVisible&&(0,n.jsx)(Y.E.div,{className:"-shadow-offset-x-4 flex h-full flex-none flex-col border-l border-neutral-200 bg-white shadow-2xl shadow-default-500/30",initial:{opacity:0,x:50,width:0},animate:{opacity:1,x:0,width:"55%",transition:{delay:.1,type:"spring",stiffness:200,damping:30}},exit:{opacity:0,x:50,width:0,scale:.97,transition:{type:"spring",stiffness:300,damping:35}},children:(0,n.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,n.jsx)("div",{className:"text-sm text-default-500",children:"Loading workflow..."})})})}):(0,n.jsx)(M.M,{children:t.isVisible&&(0,n.jsxs)(Y.E.div,{className:"-shadow-offset-x-4 flex h-full w-full flex-none flex-col border-l border-neutral-200 bg-white shadow-2xl shadow-default-500/30",initial:{opacity:0,x:50,width:0},animate:{opacity:1,x:0,width:"55%",transition:{delay:.1,type:"spring",stiffness:200,damping:30}},exit:{opacity:0,x:50,width:0,scale:.97,transition:{type:"spring",stiffness:300,damping:35}},children:[(0,n.jsxs)(Y.E.div,{className:"flex w-full items-center justify-between gap-4 p-4",initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,y:-10,transition:{duration:.2}},children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)(g.A,{onPress:a,isIconOnly:!0,variant:"flat",color:"default",size:"sm",children:(0,n.jsx)(eZ.Z,{className:"h-4 w-4 text-default-500"})}),(0,n.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,n.jsx)("h3",{className:"line-clamp-1 text-sm text-default-700",children:s.title||t.title}),(0,n.jsxs)("p",{className:"flex items-center gap-1 text-xs text-default-400",children:[(0,n.jsx)(eQ.Z,{className:"h-3 w-3"}),(null===(e=s.Workflow)||void 0===e?void 0:e.title)||t.title]})]})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)(ae.z,{color:s.status===eD.WorkflowRunStatus.COMPLETED?"success":s.status===eD.WorkflowRunStatus.FAILED?"danger":s.status===eD.WorkflowRunStatus.STOPPED?"warning":"primary",variant:"dot",size:"sm",children:s.status}),(0,n.jsx)(h.e,{content:"Open in new tab for full view",children:(0,n.jsx)(g.A,{variant:"light",color:"primary",size:"sm",onClick:()=>{window.open(l,"_blank")},isIconOnly:!0,children:(0,n.jsx)(af.Z,{className:"h-4 w-4"})})})]})]}),(0,n.jsx)(Y.E.div,{className:"w-full flex-1 overflow-hidden",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{type:"spring",stiffness:200,damping:25}},exit:{opacity:0,x:20,transition:{duration:.15}},children:(0,n.jsx)("iframe",{src:l,className:"h-full w-full",frameBorder:"0"})})]})})}var ah=(0,U.$)("b080e8a996ebb4125ab9f039511f10b2160e3cda"),ag=a(76444);function av(e){var t;let a=e0.h.useUtils(),{chatbotData:s,chatbotConvoId:i,sessionToken:d,setSessionToken:c,accentColors:u}=(0,v.X)(),{checkRequestAvailability:m}=function(){let{aiCreditCount:e,aiCreditLimit:t,chatbotData:a}=(0,v.X)();return{checkRequestAvailability:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=am({aiCreditCount:e,aiCreditLimit:t,numAiQueriesToBeConsumed:s.numAiQueriesToBeConsumed||1,workspaceId:a.workspaceId});if(!i.canProceed)return eb.Am.warning(i.message||"Invalid action!"),!1;let n=ap({credentialList:{OPENAI_API_KEY:null,ANTHROPIC_API_KEY:null,OPENROUTER_API_KEY:null,GOOGLE_GENAI_API_KEY:null,GROQ_API_KEY:null,MISTRAL_API_KEY:null,AWS_ACCESS_KEY_ID:null,AWS_SECRET_ACCESS_KEY:null,PERPLEXITY_API_KEY:null,MINDPAL_API_KEY:null,XAI_API_KEY:null,TOGETHER_AI_API_KEY:null,DEEPSEEK_API_KEY:null,FIREWORKS_API_KEY:null,GOOGLE_DRIVE_ACCESS_TOKEN:null,GOOGLE_DRIVE_REFRESH_TOKEN:null,AIRTABLE_ACCESS_TOKEN:null,NOTION_ACCESS_TOKEN:null,DROPBOX_ACCESS_TOKEN:null,DROPBOX_REFRESH_TOKEN:null,STRIPE_PUBLISHABLE_KEY:null,STRIPE_SECRET_KEY:null,TELEGRAM_USER_ID:null,ANCHOR_API_KEY:null,E2B_API_KEY:null},model:s.selectedLanguageModel||{isAvailableByDefault:!0,requiredCredentialTypes:[]}});return!!n.canProceed||(eb.Am.info(n.message||"Invalid action!"),!1)}}}(),p=tz.find(e=>e.id===s.Agent.languageModelId),f=(0,I.useMemo)(()=>!s.Agent.languageModelId||(null==p?void 0:p.imageInputSupport)||!1,[s.Agent.languageModelId,null==p?void 0:p.imageInputSupport]),x=(0,I.useRef)(null),h=(0,I.useRef)(!1),g=(0,I.useRef)(void 0),[y,w]=(0,I.useState)([]),[b,N]=(0,I.useState)([]),j=(0,I.useRef)(null);(0,I.useEffect)(()=>{if(!j.current){let e=new URLSearchParams(window.location.search),t={};e.forEach((e,a)=>{"idle"!==a&&(t[a]=e)}),Object.keys(t).length>0&&(j.current=t)}},[]);let[C,A]=(0,I.useState)(""),[S,E]=(0,I.useState)(!1),{setDataStream:_}=(0,eL.A)(),{messages:k,setMessages:P,status:R,sendMessage:T,regenerate:O}=(0,o.RJ)({id:s.id,transport:new l.PD({api:"/api/chat/chatbot"}),messages:e.initialMessages,experimental_throttle:100,onData:e=>{if(_(t=>t?[...t,e]:[]),"data-chatbotConvoId"===e.type&&(i.current=e.data,!d&&e.data)){let t=(0,ag.gl)(e.data);c(t);{let e=new URL(window.location.href);e.searchParams.set("session",t),window.history.replaceState({},"",e.toString())}}},onFinish:()=>{A(""),w([]),N([]),h.current=!1,g.current=void 0,a.usageControl.getAiCreditCountByChatbotSlug.invalidate()},onError:e=>{h.current?(g.current=e,A(""),w([]),N([])):(h.current=!0,O({body:{chatbotId:s.id,isFallback:!0,chatbotConvoId:i.current}}))}}),[U,D]=(0,I.useState)(!1),[L,K]=(0,I.useState)([]),[G,F]=(0,I.useState)(0),[z,V]=(0,I.useState)(!1),q=e0.h.chatbotConvo.saveUserInfo.useMutation({onSuccess:e=>{i.current=e.id,F(2),V(!0)},onError:()=>{F(3)}});(0,I.useEffect)(()=>{i.current&&d&&!(k.length>e.initialMessages.length)&&(E(!0),ah(i.current).then(e=>{if(e.success&&e.messages&&e.messages.length>0)P(e.messages);else if(!e.success){var t,a;console.warn("Failed to load previous conversation:",e.error),(null===(t=e.error)||void 0===t?void 0:t.includes("not found"))||null===(a=e.error)||void 0===a||a.includes("Invalid")}}).catch(e=>{console.error("Error loading previous conversation:",e)}).finally(()=>{E(!1)}))},[i.current,d]);let[B,W]=(0,I.useState)(!0),M=(0,I.useRef)(null),Y=(0,I.useCallback)(()=>{M.current&&M.current.scrollTo({top:M.current.scrollHeight,behavior:"smooth"})},[]),Z=t=>{var a,n;if(("submitted"===R||"streaming"===R)&&!g.current||e.isUserInfoRequired&&!z&&!i.current||(h.current=!1,g.current=void 0,!m({numAiQueriesToBeConsumed:null!==(n=null==p?void 0:p.aiCreditsPerRequest)&&void 0!==n?n:void 0,selectedLanguageModel:p})))return;h.current=!1,g.current=void 0;let l={type:"text",text:t.value},o=(null===(a=t.images)||void 0===a?void 0:a.map((e,t)=>({type:"file",mediaType:"image/png",filename:"Attached Image ".concat(t+1),url:e.url||""})))||[];T({id:(0,r.Ox)(),role:"user",parts:[l,...o],metadata:{agentId:x.current,languageModelId:s.Agent.languageModelId||null,images:t.images,files:t.files}},{body:{chatbotId:s.id,chatbotConvoId:i.current}})},{artifact:H}=eG(),{workflowSidePanel:X}=e$(),J=H.isVisible,$=X.isVisible,ee=(0,I.useCallback)(()=>{let e=i.current;if(!e)return;let t="onConversationCompleteWebhook?chatbotConvoId=".concat(e);if(localStorage.getItem(t))return;let a=new URLSearchParams;a.append("conversationId",e),j.current&&a.append("queryParams",JSON.stringify(j.current)),navigator.sendBeacon("/api/chatbot/conversation-complete",a)&&localStorage.setItem(t,"1")},[]);(0,I.useEffect)(()=>{let e=()=>{ee()};return window.addEventListener("pagehide",e),()=>{window.removeEventListener("pagehide",e)}},[ee]),(0,I.useEffect)(()=>{if(!i.current||"submitted"===R||"streaming"===R||0===k.length)return;let e=k[k.length-1];if(!e||"assistant"!==e.role)return;let t=i.current;if(localStorage.getItem("onConversationCompleteWebhook?chatbotConvoId=".concat(t)))return;let a=18e4;try{let e=new URLSearchParams(window.location.search).get("idle");if(e){let t=Number(e);!Number.isNaN(t)&&t>0&&t<6e5&&(a=t)}}catch(e){}let s=window.setTimeout(()=>{ee()},a);return()=>{window.clearTimeout(s)}},[k,R,ee,i]);let et=("submitted"===R||"streaming"===R||"error"===R&&!h.current)&&!g.current;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex h-screen w-full overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-0 overflow-hidden overflow-y-auto",style:{width:J||$?"45%":"100%",transition:"width 0.5s cubic-bezier(0.19, 1, 0.22, 1)"},children:[(0,n.jsx)(Q,{messages:k}),(0,n.jsx)(tG,{isLoading:et,isAtBottom:B,setIsAtBottom:W,containerRef:M,children:(0,n.jsxs)("div",{className:"flex flex-col justify-start gap-8 pb-10 pt-6",children:[(0,n.jsx)(td,{isLoading:et,messages:k,error:g.current,setMessages:P,handleReload:e=>{var t;let a=e[e.length-1];(null==a?void 0:a.role)==="assistant"&&Array.isArray(a.parts)&&1===a.parts.length&&(null===(t=a.parts[0])||void 0===t?void 0:t.type)==="step-start"&&P(e.slice(0,-1)),O({body:{chatbotId:s.id,chatbotConvoId:i.current}})},isReadonly:!1}),e.collectUserInfo&&e.userInfoForm&&e.userInfoForm.fieldList.length>0&&!U&&!et&&(0,n.jsxs)(n.Fragment,{children:[e.isUserInfoRequired&&!z&&(0,n.jsx)("div",{className:"mb-4 flex justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("svg",{className:"h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:u.baseColor},children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),(0,n.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Complete this form to continue"})]})}),(0,n.jsx)(tD,{setUserClickClose:D,userInfoForm:e.userInfoForm,userInfoFormData:L,setUserInfoFormData:K,submitStatus:G,handleSubmitUserInfo:()=>{F(1),q.mutate({chatbotId:s.id,chatbotConvoId:i.current,userInfo:L})},isRequired:e.isUserInfoRequired})]}),!et&&k.length>0&&(null===(t=k[k.length-1])||void 0===t?void 0:t.role)==="assistant"&&(0,n.jsx)(tF,{handleSubmitUserMessage:Z,messages:k,images:y,files:b,setInput:A})]})}),(0,n.jsxs)("div",{className:"sticky bottom-6 z-20 flex flex-col items-center gap-2 px-6",children:[(0,n.jsx)(tK,{isAtBottom:B,scrollToBottom:Y}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(tR,{input:C,setInput:A,isLoading:et,isDisabled:e.isUserInfoRequired&&!z&&!i.current,isImageInputSupported:f,images:y,setImages:w,files:b,setFiles:N,handleSubmitUserMessage:e=>{Z(e)}})})]})]}),(0,n.jsx)(ad,{}),(0,n.jsx)(ax,{})]}),(0,n.jsx)(ac,{},"/api/chat/chatbot?chatbotId=".concat(s.id))]})}},66869:function(e,t,a){"use strict";a.d(t,{default:function(){return o}});var s=a(57437),i=a(60628),n=a(73888),l=a(32660),r=a(74860);function o(e){let{heading:t,desc:a,ctaText:o="Back to home",ctaOnClick:d=()=>window.location.href=r.p,consoleLogData:c}=e;return console.log(c),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-6 px-12 py-8",children:[(0,s.jsx)(n.Z,{size:40,className:"text-danger"}),(0,s.jsx)("h1",{className:"text-2xl font-semibold text-danger",children:t}),(0,s.jsx)("p",{className:"text-center text-default-500",children:a}),(0,s.jsx)(i.A,{onClick:d,variant:"shadow",color:"primary",startContent:(0,s.jsx)(l.Z,{size:16}),children:o})]})}},87188:function(e,t,a){"use strict";a.d(t,{default:function(){return i}});var s=a(57437);function i(e){return(0,s.jsx)("main",{className:"zinc-light",children:e.children})}},41121:function(e,t,a){"use strict";a.d(t,{h:function(){return r}});var s=a(91862),i=a(3762),n=a(48080);a(40257);let l=()=>"",r=(0,i.t)({config:()=>({transformer:n.ZP,abortOnUnmount:!0,links:[(0,s.gb)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,s.N8)({url:"".concat(l(),"/api/trpc")})]}),ssr:!1})},76444:function(e,t,a){"use strict";a.d(t,{gl:function(){return i},hO:function(){return n}});var s=a(82957).lW;function i(e){if(!e||"string"!=typeof e)throw Error("Invalid conversation ID");try{let t=JSON.stringify({id:e,ts:Date.now()});return s.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}catch(e){throw console.error("Error encoding session token:",e),Error("Failed to encode session token")}}function n(e){if(!e||"string"!=typeof e)return null;try{let t=e.replace(/-/g,"+").replace(/_/g,"/"),a=t.length%4;a&&(t+="=".repeat(4-a));let i=s.from(t,"base64").toString("utf-8"),n=JSON.parse(i);if(!n||"object"!=typeof n||!("id"in n)||"string"!=typeof n.id)return console.warn("Invalid session token payload structure"),null;if(!/^[a-f\d]{24}$/i.test(n.id))return console.warn("Invalid conversation ID format in session token"),null;return n.id}catch(e){return console.warn("Failed to decode session token:",e instanceof Error?e.message:"Unknown error"),null}}}},function(e){e.O(0,[1767,2191,9900,3572,6191,6989,7902,5501,6401,9442,1895,4375,6725,2971,2117,1744],function(){return e(e.s=77115)}),_N_E=e.O()}]);